"use strict";function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _set=function t(e,i,n,o){var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var l=Object.getPrototypeOf(e);null!==l&&t(l,i,n,o)}else if("value"in s&&s.writable)s.value=n;else{var r=s.set;void 0!==r&&r.call(o,n)}return n},_get=function(t,e,i){for(var n=!0;n;){var o=t,s=e,l=i;n=!1,null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,s);if(void 0!==r){if("value"in r)return r.value;var a=r.get;if(void 0===a)return;return a.call(l)}var h=Object.getPrototypeOf(o);if(null===h)return;t=h,e=s,i=l,n=!0,r=h=void 0}},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),cssua=function(t,e,i){var n=" ua-",o=/\s*([\-\w ]+)[\s\/\:]([\d_]+\b(?:[\-\._\/]\w+)*)/,s=/([\w\-\.]+[\s\/][v]?[\d_]+\b(?:[\-\._\/]\w+)*)/g,l=/\b(?:(blackberry\w*|bb10)|(rim tablet os))(?:\/(\d+\.\d+(?:\.\w+)*))?/,r=/\bsilk-accelerated=true\b/,a=/\bfluidapp\b/,h=/(\bwindows\b|\bmacintosh\b|\blinux\b|\bunix\b)/,u=/(\bandroid\b|\bipad\b|\bipod\b|\bwindows phone\b|\bwpdesktop\b|\bxblwp7\b|\bzunewp7\b|\bwindows ce\b|\bblackberry\w*|\bbb10\b|\brim tablet os\b|\bmeego|\bwebos\b|\bpalm|\bsymbian|\bj2me\b|\bdocomo\b|\bpda\b|\bchtml\b|\bmidp\b|\bcldc\b|\w*?mobile\w*?|\w*?phone\w*?)/,c=/(\bxbox\b|\bplaystation\b|\bnintendo\s+\w+)/,d={parse:function(t,e){var i={};if(e&&(i.standalone=e),t=(""+t).toLowerCase(),!t)return i;for(var n,d,f=t.split(/[()]/),p=0,m=f.length;p<m;p++)if(p%2){var g=f[p].split(";");for(n=0,d=g.length;n<d;n++)if(o.exec(g[n])){var v=RegExp.$1.split(" ").join("_"),_=RegExp.$2;(!i[v]||parseFloat(i[v])<parseFloat(_))&&(i[v]=_)}}else{var y=f[p].match(s);if(y)for(n=0,d=y.length;n<d;n++){var b=y[n].split(/[\/\s]+/);b.length&&"mozilla"!==b[0]&&(i[b[0].split(" ").join("_")]=b.slice(1).join("-"))}}if(u.exec(t))i.mobile=RegExp.$1,l.exec(t)&&(delete i[i.mobile],i.blackberry=i.version||RegExp.$3||RegExp.$2||RegExp.$1,RegExp.$1?i.mobile="blackberry":"0.0.1"===i.version&&(i.blackberry="7.1.0.0"));else if(c.exec(t)){i.game=RegExp.$1;var w=i.game.split(" ").join("_");i.version&&!i[w]&&(i[w]=i.version)}else h.exec(t)&&(i.desktop=RegExp.$1);return i.intel_mac_os_x?(i.mac_os_x=i.intel_mac_os_x.split("_").join("."),delete i.intel_mac_os_x):i.cpu_iphone_os?(i.ios=i.cpu_iphone_os.split("_").join("."),delete i.cpu_iphone_os):i.cpu_os?(i.ios=i.cpu_os.split("_").join("."),delete i.cpu_os):"iphone"!==i.mobile||i.ios||(i.ios="1"),i.opera&&i.version?(i.opera=i.version,delete i.blackberry):r.exec(t)?i.silk_accelerated=!0:a.exec(t)&&(i.fluidapp=i.version),i.edge&&(delete i.applewebkit,delete i.safari,delete i.chrome,delete i.android),i.applewebkit?(i.webkit=i.applewebkit,delete i.applewebkit,i.opr&&(i.opera=i.opr,delete i.opr,delete i.chrome),i.safari&&(i.chrome||i.crios||i.fxios||i.opera||i.silk||i.fluidapp||i.phantomjs||i.mobile&&!i.ios?(delete i.safari,i.vivaldi&&delete i.chrome):i.version&&!i.rim_tablet_os?i.safari=i.version:i.safari={419:"2.0.4",417:"2.0.3",416:"2.0.2",412:"2.0",312:"1.3",125:"1.2",85:"1.0"}[parseInt(i.safari,10)]||i.safari)):i.msie||i.trident?(i.opera||(i.ie=i.msie||i.rv),delete i.msie,delete i.android,i.windows_phone_os?(i.windows_phone=i.windows_phone_os,delete i.windows_phone_os):"wpdesktop"!==i.mobile&&"xblwp7"!==i.mobile&&"zunewp7"!==i.mobile||(i.mobile="windows desktop",i.windows_phone=+i.ie<9?"7.0":+i.ie<10?"7.5":"8.0",delete i.windows_nt)):(i.gecko||i.firefox)&&(i.gecko=i.rv),i.rv&&delete i.rv,i.version&&delete i.version,i},format:function p(t){function p(t,e){t=t.split(".").join("-");var i=n+t;if("string"==typeof e){e=e.split(" ").join("_").split(".").join("-");for(var o=e.indexOf("-");o>0;)i+=n+t+"-"+e.substring(0,o),o=e.indexOf("-",o+1);i+=n+t+"-"+e}return i}var e="";for(var i in t)i&&t.hasOwnProperty(i)&&(e+=p(i,t[i]));return e},encode:function(t){var e="";for(var i in t)i&&t.hasOwnProperty(i)&&(e&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}};d.userAgent=d.ua=d.parse(e,i);var f=d.format(d.ua)+" js";return t.className?t.className=t.className.replace(/\bno-js\b/g,"")+f:t.className=f.substr(1),d}(document.documentElement,navigator.userAgent,navigator.standalone);!function(t){function e(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0}var i=e,n=e.prototype=Object.defineProperties({},{length:{get:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},configurable:!0,enumerable:!0},lengthSquared:{get:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},configurable:!0,enumerable:!0}});n.constructor=e,n.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},n.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},n.equals=function(t,e){return e=e||!1,e?this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w:this.x===t.x&&this.y===t.y&&this.z===t.z},n.nearEquals=function(t,e,i){i=i||!1;var n=Math.abs(t.x-this.x),o=Math.abs(t.y-this.y),s=Math.abs(t.z-this.z);if(i){var l=Math.abs(t.w-this.w);return n<e&&o<e&&s<e&&l<e}return n<e&&o<e&&s<e},n.negate=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},n.incrementBy=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},n.decrementBy=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},n.scaleBy=function(t){this.x*=t,this.y*=t,this.z*=t},n.project=function(){var t=this.w;this.x/=t,this.y/=t,this.z/=t},n.normalize=function(){var t=this.length;return 0!==t&&(this.x/=t,this.y/=t,this.z/=t),t},n.dotProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.crossProduct=function(t){var i=this.x,n=this.y,o=this.z,s=t.x,l=t.y,r=t.z;return new e(n*r-o*l,o*s-i*r,i*l-n*s,1)},n.setTo=function(t,e,i){this.x=t,this.y=e,this.z=i},n.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z},n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.toString=function(){return"[Vector3D (x="+this.x+" y="+this.y+" z="+this.z+")]"},i.X_AXIS=new e(1,0,0),i.Y_AXIS=new e(0,1,0),i.Z_AXIS=new e(0,0,1),i.distance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))},i.angleBetween=function(t,e){var i=t.dotProduct(e)/(t.length*e.length);return 1<i?0:i<-1?Math.PI:Math.acos(i)},createjs.Vector3D=e}(window);var P3D=function(){function t(e,i,n,o,s,l,r,a){_classCallCheck(this,t),this.x=e,this.y=i,this.z=n,this.xCenter=o,this.yCenter=s,this.MC=l.name,this._mc=l,this.size=r,this.per_size=r,this.D=a}return _createClass(t,[{key:"reset",value:function(t,e,i){this.x=t,this.y=e,this.z=i}},{key:"recenter",value:function(t,e){this.xCenter=t,this.yCenter=e}},{key:"resize",value:function(t){this.size=t}},{key:"translate",value:function(t,e,i){this.x+=t,this.y+=e,this.z+=i}},{key:"scale",value:function(t,e,i){this.x*=t,this.y*=e,this.z*=i}},{key:"rotate",value:function(t){var e,i,n;e=this.x*t[0][0]+this.y*t[0][1]+this.z*t[0][2],i=this.x*t[1][0]+this.y*t[1][1]+this.z*t[1][2],n=this.x*t[2][0]+this.y*t[2][1]+this.z*t[2][2],this.x=e,this.y=i,this.z=n}},{key:"perspective",value:function(){var t;t=this.D/(this.z+this.D),this.xp=this.x*t,this.yp=this.y*t,this.per_size=this.size*t}},{key:"render",value:function(){this._mc.x=this.xCenter+this.xp,this._mc.y=this.yCenter-this.yp,this._mc.scaleX=this._mc.scaleY=this.per_size/100,this.setDepth()}},{key:"setDepth",value:function(){this.z<0&&this._mc.parent.addChild(this._mc)}},{key:"printPoint",value:function(){console.log("x =    "+this.x),console.log("y =    "+this.y),console.log("z =    "+this.z)}}],[{key:"rotateXMatrix",value:function(t){var e=[];return e[0]=[1,0,0],e[1]=[0,Math.cos(t),-Math.sin(t)],e[2]=[0,Math.sin(t),Math.cos(t)],e}},{key:"rotateYMatrix",value:function(t){var e=[];return e[0]=[Math.cos(t),0,-Math.sin(t)],e[1]=[0,1,0],e[2]=[Math.sin(t),0,Math.cos(t)],e}},{key:"rotateZMatrix",value:function(t){var e=[];return e[0]=[Math.cos(t),-Math.sin(t),0],e[1]=[Math.sin(t),Math.cos(t),0],e[2]=[0,0,1],e}}]),t}();!function(){function t(t){var e=/(\d+)px/i,i=e.exec(t);return Number(i[1])}var e={10:{x:2.28,y:{ff:3.45,ie:2.1,saf:1.15,other:2.15}},11:{x:2.2,y:{ff:3.55,ie:2.05,saf:.99,other:2}},12:{x:2.22,y:{ff:3.45,ie:2.05,saf:.9,other:1.9}},13:{x:2.24,y:{ff:3.5,ie:2.15,saf:.9,other:1.9}},14:{x:2.27,y:{ff:3.45,ie:2.15,saf:1.85,other:1.85}},15:{x:2.2,y:{ff:4.2,ie:2.25,saf:1.85,other:1.85}},16:{x:2.15,y:{ff:4.15,ie:2.25,saf:1.75,other:2.76}},17:{x:2.15,y:{ff:3.86,ie:2.1,saf:2.48,other:2.5}},18:{x:2.1,y:{ff:3.9,ie:2.2,saf:1.5,other:2.5}},19:{x:2.22,y:{ff:4.55,ie:2.2,saf:1.35,other:2.42}},20:{x:2.25,y:{ff:4.4,ie:2.15,saf:1.23,other:2.25}},22:{x:2.1,y:{ff:4.55,ie:2.25,saf:2.15,other:2.15}},24:{x:2.27,y:{ff:5.15,ie:2.25,saf:2.99,other:1.98}},26:{x:2.2,y:{ff:4.95,ie:2.2,saf:.65,other:1.7}},28:{x:2.25,y:{ff:4.8,ie:2.2,saf:1.5,other:2.55}},30:{x:2.2,y:{ff:5.4,ie:2.25,saf:1.39,other:2.4}},32:{x:2.2,y:{ff:5.4,ie:2.25,saf:2,other:2.1}},34:{x:2.2,y:{ff:6,ie:2.25,saf:1,other:2}},36:{x:2.2,y:{ff:5.65,ie:2.1,saf:1.65,other:1.7}}},i="other";cssua.ua.firefox&&(i="ff"),cssua.ua.ie&&(i="ie"),cssua.ua.safari&&(i="saf"),createjs.Text.prototype._drawTextLine=function(n,o,s){var l=!(lib.EMLabel&&this.parent instanceof lib.EMLabel),r=t(this.font),a=0,h=0;r>20&&(r=2*Math.round(r/2)),l&&e[r]&&(a=e[r].x,h=e[r].y[i]),"top"===this.textBaseline&&l&&(s+=h),this.outline?n.strokeText(o,a,s,this.maxWidth||65535):n.fillText(o,a,s,this.maxWidth||65535)}}();var EMDragManager=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"startDrag",value:function(e){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],s=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],l=!(arguments.length<=5||void 0===arguments[5])&&arguments[5],r=arguments.length<=6||void 0===arguments[6]?25:arguments[6];if(e.primary){var a=e.currentTarget;t._dragTarget=a,t._dragBounds=i,t._moveCallback=n,t._dropCallback=o,t._ignoreX=s,t._ignoreY=l;var h=a.rotation;a.rotation=0;var u={x:a.skewX,y:a.skewY};a.skewX=a.skewY=0,t._dragOffset=new createjs.Point(e.localX*a.scaleX,e.localY*a.scaleY),a.rotation=h,a.skewX=u.x,a.skewY=u.y,t._dragMoveListener=t._dragTarget.stage.on("stagemousemove",EMUtils.throttle(r,t.onDragMove),t),t._dragUpListener=t._dragTarget.stage.on("stagemouseup",t.onDragUp,t)}}},{key:"onDragMove",value:function(e){if(t._dragTarget){var i=t._dragTarget.parent.globalToLocal(e.stageX,e.stageY),n=t._dragTarget.x,o=t._dragTarget.y,s=i.x+t._dragTarget.regX-t._dragOffset.x,l=i.y+t._dragTarget.regY-t._dragOffset.y;t._dragBounds?(t._ignoreX||(t._dragTarget.x=Math.min(t._dragBounds.x+t._dragBounds.width,Math.max(s,t._dragBounds.x))),t._ignoreY||(t._dragTarget.y=Math.min(t._dragBounds.y+t._dragBounds.height,Math.max(l,t._dragBounds.y)))):(t._ignoreX||(t._dragTarget.x=s),t._ignoreY||(t._dragTarget.y=l)),(n!=t._dragTarget.x||o!=t._dragTarget.y||t._ignoreX&&t._ignoreY)&&t._moveCallback&&t._moveCallback(e)}}},{key:"onDragUp",value:function(e){e.primary&&t._dragTarget&&(t._dragTarget.stage.off("stagemousemove",t._dragMoveListener),t._dragTarget.stage.off("stagemouseup",t._dragUpListener),t._dropCallback&&t._dropCallback(e),t._dragTarget=null,t._dragBounds=null,t._moveCallback=null,t._dropCallback=null,t._dragOffset=null,t._dragMoveListener=null,t._dragUpListener=null)}}]),t}(),EMUtils=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"wrapLTR",value:function(e){return t.LTR_IN+e+t.LTR_OUT}},{key:"wrapRTL",value:function(e){return t.RTL_IN+e+t.RTL_OUT}},{key:"gotoFrameByLanguage",value:function(t){SimulationMetaData.language&&t&&t.gotoAndStop&&t.gotoAndStop(SimulationMetaData.language)}},{key:"throttle",value:function(t,e,i,n){function o(){function o(){l=+new Date,i.apply(a,u)}function r(){s=void 0}var a=this,h=+new Date-l,u=arguments;n&&!s&&o(),s&&clearTimeout(s),void 0===n&&h>t?o():e!==!0&&(s=setTimeout(n?r:o,void 0===n?t-h:t))}var s,l=0;return"boolean"!=typeof e&&(n=i,i=e,e=void 0),o}},{key:"debounce",value:function(t,e,i){return void 0===i?jq_throttle(t,e,!1):jq_throttle(t,i,e!==!1)}},{key:"LTR_IN",get:function(){return"‪"}},{key:"LTR_OUT",get:function(){return"‬"}},{key:"RTL_IN",get:function(){return"‫"}},{key:"RTL_OUT",get:function(){return"‬"}}]),t}(),EMColorUtils=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"rgbToHex",value:function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)}},{key:"hexToRGBObject",value:function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}},{key:"hexToRGBInteger",value:function(e){var i=t.hexToRGBObject(e);return 65536*i.r+256*i.g+i.b}}]),t}(),EMMovieClipUtils=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getWidth",value:function(t){return t.nominalBounds.width*t.scaleX}},{key:"getHeight",value:function(t){return t.nominalBounds.height*t.scaleY}},{key:"getSize",value:function(e){return{width:t.getWidth(e),height:t.getHeight(e)}}},{key:"setWidth",value:function(t,e){t.scaleX=e/t.nominalBounds.width}},{key:"setHeight",value:function(t,e){t.scaleY=e/t.nominalBounds.height}},{key:"setSize",value:function(e,i,n){t.setWidth(e,i),t.setHeight(e,n)}},{key:"setDepth",value:function(t,e,i){t.on("added",function(){var n="bottom"===i?0:e.numChildren-1;e.setChildIndex(t,n)},this)}},{key:"createShape",value:function(t){var e=new createjs.Shape;t.addChild(e),t.shapeGlobal=e}},{key:"mouseIsInBounds",value:function(e){var i=!1,n=e.localToGlobal(0,0),o=e.localToGlobal(t.getWidth(e),0);if(stage.mouseX>=n.x&&stage.mouseX<=o.x){var s=e.localToGlobal(0,t.getHeight(e));stage.mouseY>=n.y&&stage.mouseY<=s.y&&(i=!0)}return i}}]),t}(),EMSliderClipPair=function(){function t(e){_classCallCheck(this,t),this._slider=e;for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];this._targets=n,this.init()}return _createClass(t,[{key:"init",value:function(){this.addTickEvent(),this._sliderStartListener=this._slider.on("thumbDragStart",this.onSliderStart,this)}},{key:"addTickEvent",value:function(){this._tickListener=this.firstTarget.on("tick",this.onTargetTick,this)}},{key:"removeTickEvent",value:function(){this.firstTarget.off("tick",this._tickListener)}},{key:"removeAllEvents",value:function(){this.firstTarget.off("tick",this._tickListener),this._slider.off("thumbDragStart",this._sliderStartListener),this._slider.off("change",this._sliderChangeListener),this._slider.off("thumbDragStop",this._sliderStopListener)}},{key:"goto",value:function(){for(var t=0;t<this._targets.length;t++)this.gotoOne(this._targets[t])}},{key:"gotoOne",value:function(t){var e=((this._slider.value||0)-this._slider.min)/(this._slider.max-this._slider.min);if(t instanceof EMVideo)return void(t.videoHTMLElement&&t.setCurrentFrame(t.videoHTMLElement.duration*e,!1,!0));var i=Math.round((t.totalFrames-1)*e),n=t.currentFrame;if(i!=n){for(var o=0,s=t.timeline._tweens.length;o<s;o++){for(var l=t.timeline._tweens[o],r=[],a=0;a<l._actions.length;a++){var h=l._actions[a];i>n?h.t>n&&h.t<i&&r.push(h):h.t<n&&h.t>i&&(0==r.length&&l._actions[a-1]&&l._actions[a-1].t!=i&&r.push(l._actions[a-1]),r.push(h))}i<n&&r.reverse();for(var a=0;a<r.length;a++){var h=r[a];try{h.f.apply(h.o,h.p)}catch(u){console&&console.warn(u)}}}t.gotoAndStop(i)}}},{key:"onSliderStart",value:function(){this.removeTickEvent(),this["goto"](),this._sliderChangeListener=this._slider.on("change",this.onSliderChange,this),this._sliderStopListener=this._slider.on("thumbDragStop",this.onSliderStop,this)}},{key:"onSliderChange",value:function(){this["goto"]()}},{key:"onSliderStop",value:function(){this._slider.off("change",this._sliderChangeListener),this._slider.off("thumbDragStop",this._sliderStopListener),this.addTickEvent()}},{key:"onTargetTick",value:function(){var t,e=this.firstTarget;t=e instanceof EMVideo?e.videoHTMLElement.currentTime/e.videoHTMLElement.duration:e.currentFrame/(e.totalFrames-1),this._slider.value=this._slider.min+(this._slider.max-this._slider.min)*t}},{key:"firstTarget",get:function(){return this._targets[0]}}]),t}(),ClipToGraphic=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"register",value:function(e){var i=arguments.length<=1||void 0===arguments[1]?t.LOOP:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?-1:arguments[3];if(!e)return console&&console.warn&&console.warn("Supplied MovieClip isn't available!"),!1;if(t._managedIDs.indexOf(e.id)>-1)return!1;t._managedIDs.push(e.id),t._tickListener||(t._tickListener=createjs.Ticker.on("tick",t.globalEF));var s=e.on("added",function(){var s=t.getDepth(e);t._depths.indexOf(s)==-1&&(t._depths.push(s),t._depths.sort()),t._items.push({mc:e,loop:i,firstFrame:n,depth:s,appearsAt:o==-1?e.parent.currentFrame:o})},null,!0);return t.mcAddedListeners.push({mc:e,listener:s}),!0}},{key:"unregister",value:function(e){if(!e)return console&&console.warn&&console.warn("Supplied MovieClip isn't available!"),!1;var i=t._managedIDs.indexOf(e.id);if(i==-1)return!1;if(t._managedIDs.splice(i,1),0==t._managedIDs.length)return t.resetRegistrations(),!0;for(var n=t._items.length-1;n>=0;n--)if(t._items[n].mc==e){t._items.splice(n,1);break}for(var n=0;n<t.mcAddedListeners.length;n++)if(t.mcAddedListeners[n].mc==e){e.off("added",t.mcAddedListeners[n].listener),t.mcAddedListeners.splice(n,1);break}return!0}},{key:"resetRegistrations",value:function(){t._items=[],t._managedIDs=[],t._depths=[],createjs.Ticker.off("tick",t._tickListener),t._tickListener=null;for(var e=0,i=t.mcAddedListeners.length;e<i;e++)t.mcAddedListeners[e].mc.off("added",t.mcAddedListeners[e].listener);t.mcAddedListeners=[]}},{key:"globalEF",value:function(){for(var e=0;e<t._depths.length;e++)for(var i=t._depths[e],n=0;n<t._items.length;n++){var o=t._items[n];o.depth==i&&t.onEF(o.mc,o.loop,o.firstFrame,o.appearsAt)}}},{key:"onEF",value:function(e,i,n,o){if(i==t.SINGLE_FRAME)return void e.gotoAndStop(n);var s=e.parent;if(s){var l=s.currentFrame-o,r=void 0,a=l+n+1;i==t.LOOP?r=a%e.totalFrames:i==t.PLAY_ONCE&&(r=Math.min(a,e.totalFrames-1));for(var h=0,u=e.timeline._tweens.length;h<u;h++)e.timeline._tweens[h]._useTicks=!1;e.gotoAndStop(r)}}},{key:"getDepth",value:function(t){for(var e=0;t.parent;)e++,t=t.parent;return e}},{key:"hasMC",value:function(e){if(t._managedIDs.indexOf(e.id)>-1)return!0}},{key:"hasMCWithParams",value:function(e,i){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(t._managedIDs.indexOf(e.id)==-1)return!1;for(var o=0,s=t._items.length;o<s;o++){var l=t._items[o];if(l.mc.id==e.id&&l.loop==i&&l.firstFrame==n)return!0}return!1}}]),t}();ClipToGraphic.LOOP="LOOP",ClipToGraphic.PLAY_ONCE="PLAY_ONCE",ClipToGraphic.SINGLE_FRAME="SINGLE_FRAME",ClipToGraphic._items=[],ClipToGraphic._managedIDs=[],ClipToGraphic._depths=[],ClipToGraphic._tickListener=null,ClipToGraphic.mcAddedListeners=[];var EMHoverManager=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"watch",value:function(e){function i(t){n&&t.on("EMMouseOver",n),o&&t.on("EMMouseOut",o)}var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=arguments.length<=2||void 0===arguments[2]?null:arguments[2],s=n||o;t._watchList=t._watchList||[];var l;if(Array.isArray(e))for(var r=0;r<e.length;r++)l=t._watchList.indexOf(e[r]),l==-1&&(t._watchList.push(e[r]),s&&i(e[r]));else l=t._watchList.indexOf(e),l==-1&&(t._watchList.push(e),i(e))}},{key:"unwatch",value:function(e){function i(e){var i=t._watchList.indexOf(e);i>-1&&t._watchList.splice(i,1)}if(Array.isArray(e))for(var n=0;n<e.length;n++)i(e[n]);else i(e)}},{key:"start",value:function(){var e=arguments.length<=0||void 0===arguments[0]?100:arguments[0],i=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];t.stop(),t._mode=n,t._hoverBounds=i,t._hoverBounds?t.withinBounds=!1:t.withinBounds=!0,t._mouseMoveListener=stage.on("stagemousemove",EMUtils.throttle(e,t._onHoverEvent),t),t._mouseDownListener=stage.on("stagemousedown",t._onHoverEvent,t)}},{key:"_onHoverEvent",value:function(){var e=stage.children[0].globalToLocal(stage.mouseX,stage.mouseY);if(t._hoverBounds&&(t.withinBounds=t._hoverBounds.x<=e.x&&e.x<=t._hoverBounds.x+t._hoverBounds.width&&e.y<=t._hoverBounds.y+t._hoverBounds.height&&t._hoverBounds.y<=e.y),t.withinBounds){for(var i,n,o=t._watchList,s=stage.getObjectsUnderPoint(stage.mouseX,stage.mouseY,t._mode),l=0;l<s.length;l++)if(n=s[l],i=t._containsDisplayObject(o,n)){t._dispatchHoveredObjectEvents(i);break}!i&&t._previousObject&&(t._previousObject.dispatchEvent("EMMouseOut"),t._previousObject=null)}}},{key:"stop",value:function(){t._previousObject=null,stage.off("stagemousemove",t._mouseMoveListener),stage.off("stagemousedown",t._mouseDownListener)}},{key:"_containsDisplayObject",value:function(t,e){for(var i,n=0,o=t.length;n<o;n++){i=t[n];for(var s=e;s;){if(s==i)return s;s=s.parent}}return null}},{key:"_dispatchHoveredObjectEvents",value:function(e){t._previousObject!=e&&(t._previousObject&&t._previousObject.dispatchEvent("EMMouseOut"),e.dispatchEvent("EMMouseOver")),t._previousObject=e}}]),t}(),EMMask=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"setMask",value:function(e,i){e._mask&&e._mask.parent&&e._mask.parent.removeChild(e._mask),i?(e._mask=t._maskToShape(i),i.visible=!1,e.mask=e._mask):e.mask=e._mask=null}},{key:"getMask",value:function(t){return t._mask}},{key:"_maskToShape",value:function(t){var e=new createjs.Shape;e.x=t.x,e.y=t.y,e.alpha=.5;for(var i=t.children,n=0;n<i.length;n++){var o=i[n];if(!(!o instanceof createjs.Shape))for(var s=o.graphics.instructions,l=0;l<s.length;l++){var r=s[l];r._offsetDone||(r.hasOwnProperty("x")&&r.hasOwnProperty("y")&&(r.x+=o.x,r.y+=o.y),r.hasOwnProperty("cpx")&&r.hasOwnProperty("cpy")&&(r.cpx+=o.x,r.cpy+=o.y)),r._offsetDone=!0,e.graphics.append(r)}}return e}}]),t}(),EMZoom=function(){function t(e,i){var n=arguments.length<=2||void 0===arguments[2]?2:arguments[2],o=arguments.length<=3||void 0===arguments[3]?"mouse":arguments[3],s=arguments.length<=4||void 0===arguments[4]?70:arguments[4],l=arguments.length<=5||void 0===arguments[5]?"mouse":arguments[5],r=arguments.length<=6||void 0===arguments[6]?null:arguments[6];_classCallCheck(this,t),t._noActionsNeeded||(this._mode=e,this._sources=i,this._scaleFactor=n,this._picker=o,this._radius="mouse"!=o?EMMovieClipUtils.getWidth(o)/2:s,this._windowPosition=l,this._offset=null==r?new createjs.Point(0,0):r,this.mask.visible=!1)}return _createClass(t,null,[{key:"onTouchDevicesOnly",value:function(){var e=function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}();t._noActionsNeeded=!e}}]),_createClass(t,[{key:"updateMaskSize",value:function(){var t=this.mask.graphics;t.clear(),t.setStrokeStyle(1),t.beginStroke("blue"),t.beginFill("red"),t.drawCircle(0,0,this._radius*exportRoot.scaleX)}},{key:"_addStageMouseDownEvent",value:function(){this._stageMouseDownListener=stage.on("stagemousedown",this._onStageMouseDown,this)}},{key:"_removeStageListeners",value:function(){stage.removeEventListener("stagemousemove",this._stageMouseMoveListener),stage.removeEventListener("stagemouseup",this._stageMouseUpReleaseListener),stage.removeEventListener("stagemouseup",this._stageMouseUpStopZoomListener),stage.removeEventListener("stagemousedown",this._stageMouseDownListener)}},{key:"_onStageMouseDown",value:function(){"mouse"==this._picker&&("mouse"==this._windowPosition&&(this._stageMouseUpStopZoomListener=stage.on("stagemouseup",this._stopZoom,this)),this._stageMouseMoveListener=stage.on("stagemousemove",this._updateObjectsPositions,this),this._stageMouseUpReleaseListener=stage.on("stagemouseup",this._onStageMouseUp,this)),this._startZoom(),this._updateObjectsPositions()}},{key:"_startPickerDrag",value:function(t){EMDragManager.startDrag(t,null,this._updateObjectsPositions.bind(this)),this.mask.x=0,this.mask.y=0,this._onStageMouseDown()}},{key:"_startZoom",value:function(){var e=this._scaleFactor*exportRoot.scaleY;if(this.objectContainer.removeAllChildren(),this.originalContainer.removeAllChildren(),"zoom"==this._mode){this._sources.sort(function(t,e){return t.parent.getChildIndex(t)<e.parent.getChildIndex(e)?-1:1});for(var i=0;i<this._sources.length;i++)this.objectContainer.addChild(t.clone(this._sources[i])),this.originalContainer.addChild(t.clone(this._sources[i]));this.objectContainer.scaleX=this.objectContainer.scaleY=e}else this.objectContainer.addChild(t.clone(this._sources[1])),this.originalContainer.addChild(t.clone(this._sources[0])),this.objectContainer.scaleX=this.objectContainer.scaleY=e;this.updateMaskSize(),this.objectContainer.mask=this.mask}},{key:"_updateObjectsPositions",value:function(){var t=void 0,e=new createjs.Point;if(t="mouse"==this._picker?this.originalContainer.globalToLocal(stage.mouseX,stage.mouseY):this._picker.parent.localToLocal(this._picker.x,this._picker.y,this.originalContainer),e.x=t.x*this._scaleFactor,e.y=t.y*this._scaleFactor,"mouse"==this._windowPosition){if(this.mask.x=stage.mouseX+this._offset.x,this.mask.y=stage.mouseY+this._offset.y,this.objectContainer.x=-e.x+stage.mouseX+2*this._offset.x,this.objectContainer.y=-e.y+stage.mouseY+2*this._offset.y,"mouse"!=this._picker){var i=this._picker.parent.localToGlobal(this._picker.x,this._picker.y);this.mask.x=i.x,this.mask.y=i.y,this.objectContainer.x=-e.x+i.x,this.objectContainer.y=-e.y+i.y}}else this.objectContainer.x=-e.x+this._offset.x,this.objectContainer.y=-e.y+this._offset.y}},{key:"_onStageMouseUp",value:function(){this._removeStageListeners(),this._addStageMouseDownEvent()}},{key:"_stopZoom",value:function(){this.objectContainer.removeAllChildren(),this.originalContainer.removeAllChildren(),this._onStageMouseUp()}},{key:"start",value:function(){"mouse"==this._picker?this._addStageMouseDownEvent():(this.mask.mouseEnabled=!1,this._picker.on("mousedown",this._startPickerDrag,this)),"origin"==this._windowPosition&&this.mask.on("mousedown",this._stopZoom,this)}},{key:"stop",value:function(){this._removeStageListeners()}},{key:"mask",get:function(){if(!this._mask){var t=new createjs.Graphics;this._mask=new createjs.Shape(t),stage.addChild(this._mask)}return this._mask}},{key:"objectContainer",get:function(){return this._objectContainer||(this._objectContainer=new createjs.Container,stage.addChild(this._objectContainer)),this._objectContainer}},{key:"originalContainer",get:function(){return this._originalContainer||(this._originalContainer=new createjs.Container),this._originalContainer}}],[{key:"clone",value:function(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var i in t)try{t.hasOwnProperty(i)&&(e[i]=t[i])}catch(n){console.log(n)}return e}},{key:"zoom",value:function(e){var i=arguments.length<=1||void 0===arguments[1]?2:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"mouse":arguments[2],o=arguments.length<=3||void 0===arguments[3]?70:arguments[3],s=arguments.length<=4||void 0===arguments[4]?"mouse":arguments[4],l=arguments.length<=5||void 0===arguments[5]?null:arguments[5];return new t("zoom",e,i,n,o,s,l)}},{key:"reveal",value:function(e){var i=arguments.length<=1||void 0===arguments[1]?"mouse":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"mouse":arguments[2],o=arguments.length<=3||void 0===arguments[3]?70:arguments[3];return new t("reveal",e,1,i,o,n)}}]),t}(),EMComponent=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){this.width=100,this.height=100,this.enabled=!0,this._zone=new createjs.Shape,this.addChildAt(this._zone,0),this.invalidateOnMouseEvents=!1,this.on("mousedown",this.onMouseDown,this)}},{key:"onMouseDown",value:function(){this._isDown=!0,this._downListener&&this.stage.off("stagemouseup",this._downListener),this._downListener=this.stage.on("stagemouseup",this.onMouseUp,this),this.invalidateOnMouseEvents&&this.invalidate()}},{key:"onMouseUp",value:function(){this._isDown=!1,this.stage&&(this.stage.off("stagemouseup",this._downListener),this._downListener=null),this.invalidateOnMouseEvents&&this.invalidate()}},{key:"onExtraClickTargetClick",value:function(t){this.dispatchEvent("click")}},{key:"overrideChild",value:function(t){var e=this.getChildIndex(t);this.removeChild(t);var i=new createjs.Shape;return this.addChildAt(i,e),i}},{key:"paint",value:function(){this._zone.graphics.clear();var t=this._zone.graphics;e._debugMode?(t.beginFill(createjs.Graphics.getRGB(255*Math.round(Math.random()),255*Math.round(Math.random()),255*Math.round(Math.random()),.25)),t.drawRect(0,0,this.width,this.height)):(t.beginFill(createjs.Graphics.getRGB(255,255,255,.01)),t.drawRect(0,0,this.width,this.height))}},{key:"invalidate",value:function(){this._invalidated=!0}},{key:"draw",value:function(t){this._invalidated===!0&&(this.paint(),this._invalidated=!1),_get(Object.getPrototypeOf(e.prototype),"draw",this).call(this,t)}},{key:"width",get:function(){return this._width},set:function(t){t!=this.width&&(this._width=t,this.invalidate())}},{key:"height",get:function(){return this._height},set:function(t){t!=this.height&&(this._height=t,this.invalidate())}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t,this.alpha=this.enabled?1:.5,this.mouseEnabled=this.mouseChildren=this.enabled}},{key:"invalidateOnMouseEvents",get:function(){return this._invalidateOnMouseEvents},set:function(t){this._invalidateOnMouseEvents=t}},{key:"extraClickTarget",get:function(){return this._extraClickTarget},set:function(t){t!=this.extraClickTarget&&(this.extraClickTarget&&this.extraClickTarget.off(this._extraClickTargetListener),t&&(this._extraClickTargetListener=t.on("click",this.onExtraClickTargetClick,this)),this._extraClickTarget=t)}}]),e}(createjs.MovieClip),EMLabelComponent=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){this._labelMetaRegex=/^{[^}]+}/g,_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=100,this.height=18,this.label="label",this.textSize=12,this.rtl=!1}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._lbl.text=this.label,this._lbl.rtl=this.rtl,this._lbl.textSize=this.textSize}},{key:"label",get:function(){return this._label},set:function(t){if(this._labelMetaRegex.test(t)){var e=t.match(this._labelMetaRegex)[0];e!=this._labelMeta&&(e=e.replace(/(([{,])\s?)(\w+):/g,'$1"$3":'),this._labelMeta=JSON.parse(e),this._labelMeta.x&&(this.x+=Number(this._labelMeta.x)),this._labelMeta.y&&(this.y+=Number(this._labelMeta.y)),this._labelMeta.textSize&&(this.textSize+=Number(this._labelMeta.textSize)),t=t.replace(this._labelMetaRegex,""))}t!=this._label&&(this._label=t,this.invalidate())}},{key:"textSize",get:function(){return this._textSize},set:function(t){this._textSize=t,this.invalidate()}},{key:"rtl",get:function(){return SimulationMetaData?SimulationMetaData.getRTL(this._rtl):this._rtl},set:function(t){this._rtl=t,this.invalidate()}}]),e}(EMComponent),EMTextBlockComponent=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments);
}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=100,this.height=18,this.label="label",this.textSize=12,this.rtl=!1}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._tb.label=this.label,this._tb.rtl=this.rtl,this._tb.textSize=this.textSize}},{key:"label",get:function(){return this._label},set:function(t){t=null!=t&&void 0!=t?t.toString():"",t!=this._label&&(this._label=t,this.invalidate())}},{key:"textSize",get:function(){return this._textSize},set:function(t){this._textSize=t,this.invalidate()}},{key:"rtl",get:function(){return SimulationMetaData?SimulationMetaData.getRTL(this._rtl):this._rtl},set:function(t){this._rtl=t,this.invalidate()}}]),e}(EMComponent),EMExposedLabelComponent=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"color",get:function(){return this._lbl.color},set:function(t){this._lbl.color=t,this.invalidate()}},{key:"textStyle",get:function(){return this._lbl.textStyle},set:function(t){this._lbl.textStyle=t,this.invalidate()}},{key:"align",get:function(){return this._lbl.align},set:function(t){this._lbl.align=t,this.invalidate()}}]),e}(EMLabelComponent),EMTextBlock=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=100,this.height=18,this.horizontalAlign="left",this.verticalAlign="top"}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._lbl.autoWidth(this.width),this._lbl.paint(),this._lbl.autoHeight(),"left"==this.horizontalAlign?this._lbl.x=0:"middle"==this.horizontalAlign?this._lbl.x=(this.width-this._lbl.width)/2:"right"==this.horizontalAlign&&(this._lbl.x=this.width-this._lbl.width),"top"==this.verticalAlign?this._lbl.y=0:"middle"==this.verticalAlign?this._lbl.y=(this.height-this._lbl.height)/2:"bottom"==this.verticalAlign&&(this._lbl.y=this.height-this._lbl.height)}},{key:"getTruncatedText",value:function(t,e){return this._lbl.getTruncatedText(t,e)}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign=t,this.invalidate()}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){this._verticalAlign=t,this.invalidate()}}]),e}(EMExposedLabelComponent),EMSelectableLabelComponent=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._btn.stop(),this.selected=!1}},{key:"placeButtonAsIcon",value:function(){var t=4,e=6,i=-4,n=this._btn.nominalBounds.width;this._btn.y=n/2+t,this._lbl.y=(this.height-this._lbl.height)/2,this._lbl.width=this.width-n-e-2*t,this.rtl?(this._lbl.x=i,this._btn.x=this.width-n/2-t):(this._btn.x=t+n/2,this._lbl.x=t+n+e)}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._btn.gotoAndStop&&this._btn.gotoAndStop(this.selected?4:0)}},{key:"selected",get:function(){return this._selected},set:function(t){this.selected!=t&&(this._selected=t,this.invalidate())}}]),e}(EMLabelComponent),EMOption=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.light=!1}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._lbl.color=this.light?"#d6d6d6":"#4d4d4d"}},{key:"light",get:function(){return this._light},set:function(t){this._light=t,this.invalidate()}}]),e}(EMSelectableLabelComponent),EMExclusiveOption=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),e.selectedInstances||(e.selectedInstances={}),this.groupName="EMExclusiveOption.defaultGroup",this.invalidateOnMouseEvents=!0,this.on("click",this.onClick,this)}},{key:"getSelectedInGroup",value:function(){return e.selectedInstances?e.selectedInstances[this.groupName]:null}},{key:"getSelectedInItsGroup",value:function(){return this.getSelectedInGroup()}},{key:"onClick",value:function(){this.selected=!0,this.dispatchEvent("change")}},{key:"groupName",get:function(){return this._groupName},set:function(t){this._groupName=t,this.invalidate()}},{key:"selected",get:function(){return this.getSelectedInGroup()==this},set:function(t){if(this.selected!=t){if(t){var i=this.getSelectedInGroup();i&&i!=this&&(i.selected=!1),e.selectedInstances[this.groupName]=this}else this.selected&&(e.selectedInstances[this.groupName]=null);this.invalidate()}}}]),e}(EMOption),EMLabel=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=100,this.height=14,this.text="label",this.color="black",this.textSize=12,this.textStyle="",this.fontFamily="sans-serif",this.rtl=!1,cssua.ua.ios?this._field.y=-3:cssua.ua.safari&&cssua.ua.desktop?this._field.y=-2:cssua.ua.chrome?cssua.ua.desktop&&"windows"==cssua.ua.desktop?this._field.y=-1:cssua.ua.desktop&&"macintosh"==cssua.ua.desktop?this._field.y=-1:cssua.ua.android&&(this._field.y=-1):cssua.ua.firefox&&cssua.ua.android?this._field.y=1:cssua.ua.ie&&(this._field.y=-1)}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._field.lineWidth=this.width,this.align?(this._field.textAlign=this.align,"center"==this.align?this._field.x=this.width/2:"left"==this.align?this._field.x=0:"right"==this.align&&(this._field.x=this.width)):this.rtl?(this._field.textAlign="right",this._field.x=this.width):(this._field.textAlign="left",this._field.x=0),this._field.text=this.text,this._field.color=this.color,this._field.lineHeight=this.fieldLineHeight,this._field.font=this.getFont()}},{key:"getFont",value:function(){var t=this.fontFamily.indexOf(" ")==-1?this.fontFamily:"'"+this.fontFamily+"'";return this.textStyle+" "+this.textSize+"px "+t}},{key:"autoHeight",value:function(){return this.height=this.textHeight-.2*this.textSize,this}},{key:"autoWidth",value:function(t){this._field.font=this.getFont();var e=this.getMeasuredTextWidth(this.text);return this.width=null!=t?Math.min(e,t):e,this}},{key:"getMeasuredTextWidth",value:function(t){for(var e=t.split("\n"),i=0,n=0;n<e.length;n++){var o=this._field._getMeasuredWidth(e[n]);o>i&&(i=o)}return i}},{key:"getTruncatedText",value:function(t,e){var i,n;if(this.getMeasuredTextWidth(t)<=e)return t;for(n=0;n<t.length;n++){i=t.substr(0,n+1);var o=this.getMeasuredTextWidth(i+"…");if(o>e)break}return i.substr(0,n)+"…"}},{key:"text",get:function(){return this._text},set:function(t){t!=this.text&&(this._text=t,this.invalidate())}},{key:"color",get:function(){return this._color},set:function(t){t!=this.color&&(this._color=t,this.invalidate())}},{key:"textSize",get:function(){return this._textSize},set:function(t){t!=this.textSize&&(this._textSize=t,this.invalidate())}},{key:"textStyle",get:function(){return this._textStyle},set:function(t){t!=this._textStyle&&(this._textStyle=t,this.invalidate())}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){t!=this.fontFamily&&(this._fontFamily=t,this.invalidate())}},{key:"align",get:function(){return this._align},set:function(t){t!=this.align&&(this._align=t,this.invalidate())}},{key:"rtl",get:function(){return this._rtl},set:function(t){t!=this.rtl&&(this._rtl=t,this.invalidate())}},{key:"textWidth",get:function(){return this._field.getMetrics().width}},{key:"textHeight",get:function(){return this._field.getMetrics().height}},{key:"numLines",get:function(){return this._field.getMetrics().lines.length}},{key:"fieldLineHeight",get:function(){return 1.2*this.textSize}}]),e}(EMComponent),EMBlock=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._fill=this.overrideChild(this._fill),this.width=this.height=100,this.fillAlpha=1,this.fillColor="#ffffff",this.isSquare=!1}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this);var t=this._fill.graphics;t.clear();var i=5,n=4,o=this.isSquare?0:n,s=EMColorUtils.hexToRGBInteger(this.fillColor);t.beginFill(createjs.Graphics.getRGB(s,this.fillAlpha)),t.drawRoundRectComplex(i/2,i/2,this.width-i,this.height-i,o,o,n,n),t.endFill(),t.setStrokeStyle(i),t.beginStroke("#d8d8d8"),t.drawRoundRectComplex(i/2,i/2,this.width-i,this.height-i,o,o,n,n)}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this.invalidate()}},{key:"fillColor",get:function(){return this._fillColor},set:function(t){this._fillColor=t,this.invalidate()}},{key:"isSquare",get:function(){return this._isSquare},set:function(t){this._isSquare=t,this.invalidate()}}]),e}(EMComponent),EMTitle=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._fill=this.overrideChild(this._fill),this._padding=5,this._lbl.align="center",this.width=120,this.height=28}},{key:"paintFill",value:function(){this._lbl.y=(this.height-this._lbl.height)/2;var t=this._fill.graphics;t.clear(),t.beginLinearGradientFill(["#f4f4f4","#f4f4f4","#cdcdcd"],[0,.85,1],0,0,0,this.height),t.drawRoundRect(0,0,this.width,this.height,6)}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._lbl.width=this.width-2*this._padding,this._lbl.paint(),this._lbl.autoHeight(),this._lbl.y=(this.height-this._lbl.height)/2,this._lbl.x=this._padding,SimulationMetaData.needsIERTLFix()&&(this._lbl.x+=this._lbl.textWidth),this.paintFill()}}]),e}(EMLabelComponent),EMTab=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.groupName="EMTab.defaultGroup",this.width=100,this.height=30,this._btn=this.overrideChild(this._btn),this._lbl.align="center"}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this);var t=6,i=this._btn.graphics;i.clear();var n=this.selected?"#d8d8d8":"#f0f0f0";!this.selected&&this._isDown&&(n="#aaaaaa"),i.beginFill(n,[0,1],0,0,0,this.height),i.drawRoundRectComplex(0,0,this.width,this.height,t,t,0,0),i.endFill(),this.selected&&(i.endStroke(),i.beginFill("#d8d8d8"),i.drawRect(1,this.height-1,this.width-2,1)),this._lbl.width=this.width,this._lbl.y=(this.height-this._lbl.height)/2,SimulationMetaData.needsIERTLFix()&&(this._lbl.paint(),this._lbl.x=this._lbl.textWidth)}}],[{key:"joinTabs",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];if(0!=e.length){for(var n,o=3,s=e[0].x+e[0].width+o,l=1;l<e.length;l++)n=e[l],n.x=s,s+=n.width+o;return n.x+n.width-e[0].x}}},{key:"setupTabs",value:function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var s=e.joinTabs.apply(e,n),l=n[0];t.isSquare=!0,t.x=l.x,t.y=l.y+l.height,t.width=s}}]),e}(EMExclusiveOption),EMTitleBlock=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=100,this.height=132,this._block.isSquare=!0}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._title.width=this.width,this._block.y=this._title.height-1,this._block.width=this.width,this._block.height=this.height-this._title.height+1}},{key:"fillAlpha",get:function(){return this._block.fillAlpha},set:function(t){this._block.fillAlpha=t,this.invalidate()}},{key:"fillColor",get:function(){return this._block.fillColor},set:function(t){this._block.fillColor=t,this.invalidate()}},{key:"isSquare",get:function(){return this._block.isSquare},set:function(t){this._block.square=t,this.invalidate()}},{key:"label",get:function(){return this._title.label},set:function(t){this._title.label=t,this.invalidate()}},{key:"textSize",get:function(){return this._title.textSize},set:function(t){this._title.textSize=t,this.invalidate()}}]),e}(EMComponent),EMTitleBlockTitle=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=100,this.height=32,this._btn=this.overrideChild(this._btn),this._tb.horizontalAlign="middle",this._tb.verticalAlign="middle",this._tb.align="center",this._tb.color="#4d4d4d"}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this);var t=6,i=this._btn.graphics;i.clear(),i.beginFill("#D8D8D8",[0,1],0,0,0,this.height),i.drawRoundRectComplex(0,0,this.width,this.height,t,t,0,0),i.endFill();var n=6;this._tb.x=n,this._tb.y=0,this._tb.width=this.width-2*n,this._tb.height=this.height,SimulationMetaData.needsIERTLFix()&&(this._tb.paint(),this._tb.x+=this._tb._lbl.textWidth)}},{key:"label",get:function(){return this._tb.label},set:function(t){this._tb.label=t,this.invalidate()}},{key:"textSize",get:function(){return this._tb.textSize},set:function(t){this._tb.textSize=t,this.invalidate()}}]),e}(EMComponent),EMRadioButton=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=126,this.height=26,this.groupName="EMRadioButton.defaultGroup"}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this.placeButtonAsIcon()}}]),e}(EMExclusiveOption),EMIconButton=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=this.height=34,this.setChildIndex(this._icons,this.numChildren-1),this.hasLargeIcon=!1,this._contact.mouseChildren=!1,this.on("click",this.onClick,this),this.type="play",this.invalidateOnMouseEvents=!0,this._isPlaying=!1}},{key:"onClick",value:function(){this.isPlayPause&&this.togglePause()}},{key:"paint",value:function(){this._icons.gotoAndStop(this.type);var t;t=this._isDown?2:0,this._contact.gotoAndStop(t),this.isPlayPause&&this._icons.getChildAt(0).gotoAndStop(this._isPlaying?1:0),_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this)}},{key:"togglePause",value:function(){this._isPlaying=!this._isPlaying,this.invalidate()}},{key:"isPlayPause",get:function(){return"playPause"==this.type}},{key:"isPlaying",get:function(){return this.isPlayPause&&this._isPlaying},set:function(t){this.type="playPause",this._isPlaying=t,this.invalidate()}},{key:"hasLargeIcon",get:function(){return this._hasLargeIcon},set:function(t){this._hasLargeIcon=t,this.invalidate()}},{key:"type",set:function(t){this._type=t,this.invalidate()},get:function(){return this._type}}]),e}(EMComponent),EMSlider=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._innerTrackOffset=6,this._track=this.overrideChild(this._track),this.width=100,this.height=24,this.min=0,this.max=100,this.value=0,this._thumb.on("mousedown",this.startThumbDrag,this),this._track.on("mousedown",this.onTrackDown,this)}},{key:"startThumbDrag",value:function(t){this.dispatchEvent("thumbDragStart");var e=this;EMDragManager.startDrag(t,new createjs.Rectangle(0,0,this.width-this.thumbWidth,0),function(t){return e.onThumbMove(t)},function(t){return e.onThumbDrop(t)})}},{key:"onTrackDown",value:function(t){this._thumb.x=Math.max(0,Math.min(this.width-this.thumbWidth,t.localX-this.thumbWidth/2)),this.onThumbMove(),this.startThumbDrag({primary:t.primary,pointerID:t.pointerID,currentTarget:this._thumb,localX:this.thumbWidth/2,localY:0})}},{key:"onThumbMove",value:function(){this._value=this._getValueOnThumb(),this.dispatchEvent("change")}},{key:"onThumbDrop",value:function(){this.dispatchEvent("thumbDragStop")}},{key:"_moveThumbOnValue",value:function(){var t=(this.value-this.min)/(this.max-this.min);this._thumb.x=(this.width-this.thumbWidth)*t}},{key:"_getValueOnThumb",value:function(){var t=this._thumb.x/(this.width-this.thumbWidth);return this.min+t*(this.max-this.min)}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),EMMovieClipUtils.setSize(this._thumb,this.height-2,this.height-2);var t=this._track.graphics;t.clear(),t.beginFill("white"),t.drawRoundRect(0,0,this.width,this.height,this.height/2),t.beginFill("#e5e5e5");var i=this.width-2*this._innerTrackOffset,n=this.height-2*this._innerTrackOffset;t.drawRoundRect(this._innerTrackOffset,this._innerTrackOffset,i,n,n/2),this._moveThumbOnValue()}},{key:"min",get:function(){return this._min},set:function(t){this._min=t,this.value<this.min&&(this.value=this.min),this.invalidate()}},{key:"max",get:function(){return this._max},set:function(t){this._max=t,this.value>this.max&&(this.value=this.max),this.invalidate()}},{key:"value",get:function(){return this._value},set:function(t){var e=Math.min(Math.max(t,this.min),this.max);e!=this.value&&(this._value=e,this.invalidate())}},{key:"thumbWidth",get:function(){return this.height}}]),e}(EMComponent),EMLegend=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._lbl.color="#333333",this.width=100,this.height=20,this.side="bottom"}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this);var t=3,i=3;this._lbl.autoWidth(),this._lbl.paint(),this._lbl.autoHeight();var n=this._lbl.width+2*i,o=this._lbl.textHeight+i;EMMovieClipUtils.setSize(this._fill,n,o);var s="top"==this.side||"bottom"==this.side||"none"==this.side;s?(this._stick.visible="none"!=this.side,this._lbl.align="center",EMMovieClipUtils.setWidth(this._stick,n),this._stick.rotation=0,this._fill.x=(this.width-n)/2,this._stick.x=this._fill.x,"top"==this.side?(this._stick.y=0,this._fill.y=t):(this._stick.y=this.height-t,this._fill.y=this._stick.y-o)):(this._stick.visible=!0,this._fill.y=(this.height-o)/2,EMMovieClipUtils.setWidth(this._stick,o),this._stick.rotation=90,this._stick.y=this._fill.y,"left"==this.side?(this._lbl.align="left",this._stick.x=t,this._fill.x=t):(this._lbl.align="right",this._stick.x=this.width,this._fill.x=this.width-t-n)),this._lbl.x=this._fill.x+i,this._lbl.y=this._fill.y+i,s&&SimulationMetaData.needsIERTLFix()&&(this._lbl.x+=this._lbl.width)}},{key:"side",get:function(){return this._side},set:function(t){this._side=t,this.invalidate()}}]),e}(EMLabelComponent),EMButton=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._contact=this.overrideChild(this._contact),this._tb.color="#4d4d4d",this._tb.horizontalAlign="middle",this._tb.verticalAlign="middle",this._tb.align="center",this.bgColor="#d8d8d8",this.bgColorDown="#aaaaaa",this.width=116,this.height=28,this.invalidateOnMouseEvents=!0}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this);var t=3,i=6;this._tb.x=i,this._tb.y=0,this._tb.width=this.width-2*i,this._tb.height=this.height;var n=this._contact.graphics;n.clear(),this.highlighted&&(n.beginFill(this.bgColorDown),n.drawRoundRect(-2,-2,this.width+4,this.height+4,1.5*t)),n.beginFill(this._isDown?this.bgColorDown:this.bgColor),n.drawRoundRect(0,0,this.width,this.height,t),SimulationMetaData.needsIERTLFix()&&(this._tb.paint(),this._tb.x+=this._tb._lbl.textWidth)}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,this.invalidate()}},{key:"bgColorDown",get:function(){return this._bgColorDown},set:function(t){this._bgColorDown=t,this.invalidate()}},{key:"highlighted",get:function(){return this._highlighted},set:function(t){this._highlighted=t,this.invalidate()}}]),e}(EMTextBlockComponent),EMCheckbox=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=126,this.height=26,this.on("click",this.toggleSelected,this)}},{key:"toggleSelected",value:function(){this.selected=!this.selected,this.dispatchEvent("change")}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this.placeButtonAsIcon()}}]),e}(EMOption),EMController=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),e.instance=this,106.6==this._logo.nominalBounds.width&&41==this._logo.nominalBounds.height||this.on("added",function(){this.stage.alpha=0}),this._buttonPadding=4,this.width=550,this.height=40,this.setChildIndex(this._bg,0),this.hideHelp(),this._helpOverlay.name="_helpOverlay",this._helpOverlay.on("click",this.hideHelp,this),this._legendButton.type="legends",this._legendButton.on("click",this.toggleLegend,this),this._helpButton.type="help",this._helpButton.on("click",this.showHelp,this),this.help="",this.hasLegends=!1,this.hasSlider=!1,this.legendIsOn=!1}},{key:"showHelp",value:function(){var t=this.stage.getChildAt(0);this._helpOverlay.x=this._helpOverlay.y=0,this._helpOverlay.alpha=0,t.addChild(this._helpOverlay),createjs.Tween.get(this._helpOverlay).to({alpha:1},100)}},{key:"hideHelp",value:function(){if(this._helpOverlay.parent){var t=this._helpOverlay;createjs.Tween.get(t).to({alpha:0},100).call(function(){t.parent&&t.parent.removeChild(t)})}}},{key:"toggleLegend",value:function(){this.legendIsOn=!this.legendIsOn,this.dispatchEvent("legendChange"),this.dispatchEvent("legend"+(this.legendIsOn?"Show":"Hide"))}},{key:"setButtons",value:function(t){this._userButtons=t;for(var e=0;e<t.length;e++){var i=t[e];i.button.type=i.type,i.button.hasLargeIcon=i.hasLargeIcon,i.button.y=(this.height-i.button.height)/2}}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this.placeRightButtons(),this.placeUserButtons(),this.placeSlider()}},{key:"placeUserButtons",value:function(){if(null==this._userButtons||0==this._userButtons.length)return void(this._leftLimit=this._buttonPadding);for(var t=this._buttonPadding,e=0;e<this._userButtons.length;e++){var i=this._userButtons[e];i.button.x=t,t+=i.button.width}this._leftLimit=t+this._buttonPadding}},{key:"placeRightButtons",value:function(){var t=[];null!=this.help&&this.help.length>0?(this._helpButton.visible=!0,t.push(this._helpButton),this._helpButton.scaleX=SimulationMetaData.inverseRTL?-1:1):this._helpButton.visible=!1,this.hasLegends?(this._legendButton.visible=!0,t.push(this._legendButton)):this._legendButton.visible=!1;for(var e=this._logo.x-this._buttonPadding,i=0;i<t.length;i++){var n=t[i];e-=n.width,n.x=e}SimulationMetaData.inverseRTL&&(this._helpButton.x+=this._helpButton.width),this._legendFeedback.x=this._legendButton.x,this._legendFeedback.y=this._legendButton.y,this._rightLimit=e-this._buttonPadding}},{key:"placeSlider",value:function(){this._slider.visible=this.hasSlider,this._slider.visible&&(this._slider.x=this._leftLimit,this._slider.width=this._rightLimit-this._leftLimit)}},{key:"help",get:function(){return this._help},set:function(t){this._help=t,this._helpOverlay.label=t,this.invalidate()}},{key:"legendIsOn",get:function(){return this._legendIsOn},set:function(t){this._legendIsOn=t,this._legendFeedback.visible=t,this.invalidate()}},{key:"hasLegends",get:function(){return this._hasLegends},set:function(t){this._hasLegends=t,this.invalidate()}},{key:"hasSlider",get:function(){return this._hasSlider},set:function(t){this._hasSlider=t,this.invalidate()}},{key:"slider",get:function(){return this._slider}}]),e}(EMComponent),EMControllerHelp=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._lbl.color="white",this._lbl.width=200,this.width=lib.properties.width,this.height=lib.properties.height}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),EMMovieClipUtils.setSize(this._bg,this.width,this.height),this._lbl.paint(),this._lbl.autoHeight(),this._lbl.x=(this.width-this._lbl.width)/2,this._lbl.y=(this.height-this._lbl.textHeight)/2}}]),e}(EMLabelComponent),EMComboBox=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),e._instances.push(this),this.width=116,this.height=28,this.removeChild(this._line),this.emptyAtFirst=!1,this._lines=[],this._labels=[],this._labelsChanged=!1,this._groupName="EMComboBox.groupName"+Math.round(999999999*Math.random()),this._overlayHolder=new createjs.MovieClip,this._lineHolder=new createjs.MovieClip,this._linesVisible=!1,this._overlayHolder.addChild(this._lineHolder),this.on("mousedown",this.toggleLines,this)}},{key:"_removeLine",value:function(t){this._lineHolder.removeChild(t)}},{key:"_addLine",value:function(t){var e=new lib.EMComboBox__line;return e.setup(),e.label=t,e.groupName=this._groupName,e.on("click",this._onLineClick,this),this._lineHolder.addChild(e),e}},{key:"_onLineClick",value:function(t){var e=this.selectedIndex;this.selectedIndex=t.currentTarget.index,this.hideLines(),e!=this.selectedIndex&&this.dispatchEvent("change")}},{key:"toggleLines",value:function(){this._linesVisible?this.hideLines():this.showLines()}},{key:"showLines",value:function(){this._overlayHolder.stage||(this.stage.addChild(this._overlayHolder),this._overlayBackground=new createjs.Shape,this._overlayBackground.graphics.beginFill(createjs.Graphics.getRGB(255,255,255,.01)).drawRect(0,0,lib.properties.width,lib.properties.height),this._overlayHolder.addChildAt(this._overlayBackground,0),this._overlayBackground.on("mousedown",this.hideLines,this)),this._overlayBackground.scaleX=this._overlayBackground.scaleY=this._rootScale;var t=2,i=this.localToGlobal(0,this.height+t);this._lineHolder.x=i.x,this._lineHolder.y=i.y,this._lineHolder.scaleX=this._lineHolder.scaleY=this._rootScale,i=this._lineHolder.localToGlobal(this._linesWidth,0),i.x>lib.properties.width*this._rootScale&&(this._lineHolder.x-=(this._linesWidth-this.width)*this._rootScale),i=this._lineHolder.localToGlobal(0,this._linesHeight),i.y>lib.properties.height*this._rootScale&&(this._lineHolder.y-=(this._linesHeight+this.height+2*t)*this._rootScale),e.doAlphaOthers(this,!0),this._overlayHolder.visible=!0,this._linesVisible=!0,this.dispatchEvent("open")}},{key:"hideLines",value:function(){e.doAlphaOthers(this,!1),this._overlayHolder.visible=!1,this._linesVisible=!1,this.dispatchEvent("close")}},{key:"reset",value:function(){this._selectedIndex=null,this._labelsChanged=!0,this.invalidate()}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._btn.width=this.width,this._btn.height=this.height;var t=0;if(this._labelsChanged){for(;this._lines.length;)this._removeLine(this._lines.pop());for(t=0;t<this._labels.length;t++){var i=this._addLine(this._labels[t]);i.x=0,i.y=i.height*t,i.index=t,this._lines.push(i)}this.emptyAtFirst?this._btn.label="":this._lines[0]&&(this._lines[0].selected=!0,this._btn.label=this._labels[0]),this._labelsChanged=!1}var n=this.width;for(t=0;t<this._lines.length;t++){var o=this._lines[t];n=Math.max(n,o.calculateWidthForLabel(o.label))}for(t=0;t<this._lines.length;t++)this._lines[t].width=n;this._linesWidth=n,this._lines[0]&&(this._linesHeight=this._lines.length*this._lines[0].height)}},{key:"labels",set:function(t){this._labels=t,this.emptyAtFirst?this.selectedIndex=-1:this.selectedIndex=0,this._labelsChanged=!0,this.invalidate()},get:function(){return this._labels}},{key:"emptyAtFirst",get:function(){return this._emptyAtFirst},set:function(t){this._emptyAtFirst=t}},{key:"selectedIndex",set:function(t){t!=this.selectedIndex&&(t>this._labels.length-1||(this._selectedIndex=t,this._btn.label=this._labels[t],this._lines[t]&&(this._lines[t].selected=!0)))},get:function(){return this._selectedIndex}},{key:"selectedLabel",get:function(){return this._labels[this.selectedIndex]}},{key:"_rootScale",get:function(){return this.stage.getChildAt(0).scaleX}}]),e}(EMComponent);EMComboBox._padding=8,EMComboBox._instances=[],EMComboBox.alphaOthers=!1,EMComboBox.doAlphaOthers=function(t,e){if(EMComboBox.alphaOthers)for(var i=0;i<EMComboBox._instances.length;i++){var n=EMComboBox._instances[i];n!=t&&(e&&(n.previousAlpha=n.alpha),n.alpha=e?.5:n.previousAlpha)}};var EMComboBoxButton=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._tb.align="left",this._tb.horizontalAlign="left",this._tb.verticalAlign="middle"}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this._tb.label=this._tb.getTruncatedText(this.label,this.width-2*EMComboBox._padding-EMMovieClipUtils.getWidth(this._arrow)),this._tb.x=EMComboBox._padding,this._tb.width=this.width-2*EMComboBox._padding,this._arrow.x=this.width-EMMovieClipUtils.getWidth(this._arrow)}}]),e}(EMButton),EMComboBoxLine=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=116,this.height=28}},{key:"calculateWidthForLabel",value:function(t){return this._lbl.getMeasuredTextWidth(t)+2*EMComboBox._padding;
}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),EMMovieClipUtils.setSize(this._btn,this.width,this.height),this._lbl.x=EMComboBox._padding,this._lbl.y=EMComboBox._padding,this._lbl.width=this.width-2*EMComboBox._padding}}]),e}(EMExclusiveOption),EMTimer=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.width=70,this.height=90,this.textSize=9,this._lbl.align="center",this._lbl.color="#999999",this._lbl.width=this.width,this.showMS=!1,this._timer=0,this._now=0,this._running=!1}},{key:"ms2str",value:function(t){return this._mi=Math.floor(t/6e4),this._se=Math.floor((t-6e4*this._mi)/1e3),this._ms=t-1e3*this._se,e.twoDigits(this._mi)+":"+e.twoDigits(this._se)+(this.showMS?":"+e.twoDigits(this._ms):"")}},{key:"getTimerString",value:function(){return this.ms2str(this._now)}},{key:"go",value:function(){this._running=!0,clearInterval(this._interval),this._lastStart=e.getTimer(),this._timer=this._now,this._interval=setInterval(this.updateTimer.bind(this),this._updateInterval)}},{key:"pause",value:function(){this._running=!1,clearInterval(this._interval),this._timer=0,this.invalidate()}},{key:"halt",value:function(){this._running=!1,clearInterval(this._interval),this._timer=this._now=0,this.invalidate()}},{key:"updateTimer",value:function(){this._now=e.getTimer()-this._lastStart+this._timer,this.invalidate()}},{key:"paint",value:function(){this.label=this.ms2str(this._now),this._needle.rotation=6*this._se,_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this)}},{key:"showMS",get:function(){return this._showMS},set:function(t){this._showMS!=t&&(this._showMS=t,this._updateInterval=t?1:10,this.invalidate())}},{key:"ms",get:function(){return this._now}},{key:"minutePart",get:function(){return this._mi}},{key:"secondPart",get:function(){return this._se}},{key:"msPart",get:function(){return this._ms}},{key:"isRunning",get:function(){return this._running}}],[{key:"getTimer",value:function(){return(new Date).getTime()}},{key:"twoDigits",value:function(t){return t<10?"0"+t:t.toString().length>2?t.toString().substr(0,2):t.toString()}}]),e}(EMLabelComponent),EMOverlay=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.mcsAbove=[]}},{key:"_setMCSAbove",value:function(t){var i=e._getHelpOverlay();i&&t.push(i),this._mcsAbove=t,this.manageAboveMCs(),this.updateAboveMCsPlacement()}},{key:"manageAboveMCs",value:function(){if(this._mcsAbove&&0!=this._mcsAbove.length)for(var t=this._mcsAbove.length,i=0;i<t;i++){var n=this._mcsAbove[i];if(n._aboveCanvas&&n._aboveCanvas._overlayInstance!=this&&document.body.contains(n._aboveCanvas)&&e._moveBodyChildToTop(n),n._aboveCanvas){if(!n.isVisible()){var o=n._aboveCanvas.getContext("2d");o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,n._aboveCanvas.width,n._aboveCanvas.height)}n._aboveCanvas.style.display="block"}else n._aboveCanvas=this.createAboveCanvas(n),n._previousAlpha=n.alpha,n.stage||(n.alpha=.01),this.manageRenderFunctions(n)}}},{key:"getRandomIDString",value:function(){return"xxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)})}},{key:"createAboveCanvas",value:function(t){var e=document.createElement("canvas");return e.id="EMOverlayCanvas_"+this.name+"_"+t.name+"_"+this.getRandomIDString(),e.style.pointerEvents="none",e._overlayInstance=this,this.updateAboveMCsPlacement(),document.body.appendChild(e),e}},{key:"manageRenderFunctions",value:function(t){var e=t.draw,i=function(i,n){if(!this.stage||!this._aboveCanvas)return t.draw=e,e.bind(this)(i,n);i=this._aboveCanvas.getContext("2d"),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this._aboveCanvas.width,this._aboveCanvas.height);var o=this,s=void 0;for(s=o.getMatrix();o=o.parent;){var l=o.getMatrix();s.prependMatrix(l)}return t.currMatrix=s,i.setTransform(s.a,s.b,s.c,s.d,s.tx,s.ty),e.bind(this)(i,n),!0};t.draw=i,t.on("added",function(){t.alpha=t._previousAlpha,t.draw=i}),t.on("removed",function(){if(t.draw=e,this._aboveCanvas){var i=this._aboveCanvas.getContext("2d");i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this._aboveCanvas.width,this._aboveCanvas.height)}})}},{key:"hideCanvasAbove",value:function(){for(var t=0,i=this._mcsAbove.length;t<i;t++){var n=this._mcsAbove[t],o=n._aboveCanvas,s=n==e._getHelpOverlay();!s&&o&&document.body.contains(o)&&(o.style.display="none")}}},{key:"updateAboveMCsPlacement",value:function(){if(this._mcsAbove){for(var t=canvas.getBoundingClientRect(),i=document.documentElement,n=t.top+window.pageYOffset-i.clientTop,o=t.left+window.pageXOffset-i.clientLeft,s=0,l=this._mcsAbove.length;s<l;s++){var r=canvas.width,a=canvas.height,h=this._mcsAbove[s],u=h._aboveCanvas;u&&(u.width!=r&&u.setAttribute("width",r),u.height!=a&&u.setAttribute("height",a),u.style.position="absolute",u.style.left=o+"px",u.style.top=n+"px")}var c=e._getHelpOverlay();c&&e._moveBodyChildToTop(c,!0)}}},{key:"mcsAbove",set:function(t){var e=void 0;e=null===t?[]:Array.isArray(t)?t:[t],this.on("tick",function(){this._setMCSAbove(e)},this,!0)}}],[{key:"_getHelpOverlay",value:function(){return EMController&&EMController.instance&&EMController.instance._helpOverlay?EMController.instance._helpOverlay:null}},{key:"_moveBodyChildToTop",value:function(t,e){if(!t._movedToTop||e){var i=t._aboveCanvas;i&&i.nextSibling&&(document.body.removeChild(i),document.body.appendChild(i),t._movedToTop=!0)}}}]),e}(EMComponent),EMVideo=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this._filePath="",this._syncedWith=null,this._itemListened=null,this._posterURL=null,this._withBorder=!1,this._withFadeIn=!1,this._firstFrame=0,this._posterClickHandler=null,this._withPosterPlayOverlay=!1,this._videoCreated=!1,this._loadStarted=!1,this._videoHTMLElement=null,this._videoExtensions=["mp4"],this._listenerClick=null,this._createVideoTickListener=null,this._addControlsAndPlayTickListener=null,this._loop=!1,this.removeAllChildren(),document.body.addEventListener("AfterResize",this.changeWidth.bind(this))}},{key:"createVideo",value:function(t,e,i,n){var o=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],s=!(arguments.length<=5||void 0===arguments[5])&&arguments[5],l=arguments.length<=6||void 0===arguments[6]?0:arguments[6];if(!this._videoCreated){this._videoCreated=!0,this._createVideoTickListener||(this._createVideoTickListener=createjs.Ticker.on("tick",function(){this.checkPosition(),this._syncedWith&&this._syncTimelineOnVideo()},this)),t&&(this.filePath=t),e&&(this.syncedWith=e),i&&(this.itemListened=i),n&&(this.posterURL=n),o&&(this.withBorder=o),s&&(this.withFadeIn=s),l&&(this.firstFrame=l),this.createVideoTag();for(var r=arguments.length,a=Array(r>7?r-7:0),h=7;h<r;h++)a[h-7]=arguments[h];a&&a.length&&(this.mcsAbove=a)}}},{key:"forcePlay",value:function(){return!!this.videoHTMLElement&&(this._loadStarted?(this.videoHTMLElement.play(),this.removePoster(),!0):(this.videoHTMLElement.oncanplay=function(){this.videoHTMLElement.play(),this.removePoster(),this.videoHTMLElement.oncanplay=null}.bind(this),this.videoHTMLElement.load(),!0))}},{key:"pauseVideo",value:function(){this.videoHTMLElement&&this.videoHTMLElement.pause()}},{key:"resumeVideo",value:function(){this.videoHTMLElement&&this.videoHTMLElement.play()}},{key:"reloadVideo",value:function(){this.videoHTMLElement&&this.videoHTMLElement.load()}},{key:"setCurrentTime",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.videoHTMLElement.setAttribute("controls",!0);var i=isFinite(t)?Math.max(0,t):0;i>=this.videoHTMLElement.duration&&(i=this.videoHTMLElement.duration-.001),this.videoHTMLElement.currentTime=i,this.videoHTMLElement.pause(),e&&this.videoHTMLElement.play(),this.videoHTMLElement.removeAttribute("controls")}},{key:"setCurrentFrame",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(!this.videoHTMLElement)return!1;var n=i?t:(t-this._firstFrame)/lib.properties.fps;return!(n==this.videoHTMLElement.currentTime&&!e)&&(e||(this.videoHTMLElement.onplaying=function(){this.removePoster(),this.videoHTMLElement.pause(),this.videoHTMLElement.onplaying=null}.bind(this)),this.setCurrentTime(n,!0),!0)}},{key:"gotoAndStopVideo",value:function(t){this.setCurrentFrame(t,!1)}},{key:"gotoAndPlayVideo",value:function(t){this.setCurrentFrame(t,!0)}},{key:"createVideoTag",value:function(){this.videoHTMLElement&&(this.videoHTMLElement.ontimeupdate=null,this.videoHTMLElement.onloadstart=null,this._loadStarted=!1,document.body.removeChild(this.videoHTMLElement)),this.videoHTMLElement=document.createElement("video"),document.body.appendChild(this.videoHTMLElement),this.posterURL&&(this._posterElement?this._posterElement.setAttribute("src",this.posterURL):(this._posterElement=document.createElement("div"),this._posterElementImage=document.createElement("img"),this._posterElementImage.setAttribute("src",this.posterURL),this._posterClickHandler?(this._posterElement.onclick=this._posterClickHandler,this._posterElement.className="imgPosterVideoWithClickHandler"):this._posterElement.className="imgPosterVideo",this.withPosterPlayOverlay&&(this._posterElement.className+=" withPosterPlayOverlay"),this._posterElement.appendChild(this._posterElementImage),document.body.appendChild(this._posterElement),stage.on("stagemousemove",function(){if(this._posterElement){var t=EMOverlay._getHelpOverlay();t&&t.parent?this._posterElement.style.pointerEvents="none":this._posterElement.style.pointerEvents=""}},this))),this.changeWidth();for(var t=0,e=this._videoExtensions.length;t<e;t++){var i=document.createElement("source");i.setAttribute("src",this._filePath+"."+this._videoExtensions[t]),i.setAttribute("type","video/"+this._videoExtensions[t]),this.videoHTMLElement.appendChild(i)}this._videoHTMLElement.loop=this._loop,this.videoHTMLElement.style.display="none",this.videoHTMLElement.ontimeupdate=function(){this.videoHTMLElement.currentTime==this.videoHTMLElement.duration&&this.dispatchEvent("ended")}.bind(this),this.videoHTMLElement.onloadstart=function(){this._loadStarted=!0}.bind(this),this.defineStyle()}},{key:"defineStyle",value:function(){if(!e.hasStyle){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.innerHTML=("html, body {\n\t\t\toverflow: hidden;\n\t\t}\n\t\tvideo, .imgPosterVideo, .imgPosterVideoWithClickHandler {\n\t\t\t"+(this._withBorder?"border: solid 6px #d8d8d8;\n\t\t\t\tborder-radius: 4px;":"")+"\n\t\t\tposition: absolute;\n\t\t}\n\t\t.imgPosterVideo img, .imgPosterVideoWithClickHandler img {\n\t\t\tdisplay: block;\n\t\t}\n\t\t.withPosterPlayOverlay:after {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\t\n\t\t\twidth: 0; \n\t\t\theight: 0; \n\t\t\tborder-top: 30px solid transparent;\n\t\t\tborder-bottom: 30px solid transparent;\n\t\t\tborder-left: 60px solid rgba(255, 255, 255, .8);\n\t\t\t\n\t\t\ttop: 50%;\n\t\t    left: 50%;\n\t\t    transform: translate(-50%, -50%);\n\t\t}\n\t\tvideo {\n\t\t\tbackground: white;\n\t\t}\n\t\tvideo, .imgPosterVideo {\n\t\t\tpointer-events: none;\n\t\t}\n\t\t\n\t\t.u-resizing {\n\t\t\twidth: 0;\n\t\t\theight: 0;\n\t\t}\n\t\t.u-resizing * {\n\t\t\tposition: relative!important;\n\t\t}").trim(),t.appendChild(i),e.hasStyle=!0}}},{key:"_syncTimelineOnVideo",value:function(){if(this.stage){var t=Array.isArray(this._syncedWith)?this._syncedWith:[this._syncedWith],e=t[0],i=Math.floor(this._firstFrame+this.videoHTMLElement.currentTime*lib.properties.fps);i=Math.min(i,e.totalFrames-1);for(var n=0;n<t.length;n++){var o=t[n];o.currentFrame!=i&&(o.paused||this.videoHTMLElement.paused?o.gotoAndStop(i):o.gotoAndPlay(i))}}}},{key:"checkPosition",value:function(){if(!this.stage||!this.isVisible()){if("none"==this.videoHTMLElement.style.display&&(!this._posterElement||this._posterElement&&"none"==this._posterElement.style.display))return;return this.videoHTMLElement.pause(),this.videoHTMLElement.style.display="none",this._posterElement&&(this._posterElement.style.display="none"),void this.hideCanvasAbove()}this.manageAboveMCs(),this.videoHTMLElement.style.display="block";var t=this.localToGlobal(0,0),e=canvas.getBoundingClientRect();this.videoHTMLElement.style.left=t.x+e.left+"px",this.videoHTMLElement.style.top=t.y+e.top+"px",this._posterElement&&("block"!=this._posterElement.style.display&&(this._posterElement.style.display="block",this._withFadeIn&&this.fadeIn(this._posterElement)),this._posterElement.style.left=this.videoHTMLElement.style.left,this._posterElement.style.top=this.videoHTMLElement.style.top),this._previousX=this.x,this._previousY=this.y,this.changeWidth()}},{key:"changeWidth",value:function(){if(this.videoHTMLElement){var t=EMMovieClipUtils.getWidth(this)*exportRoot.scaleX;this._previousWidth!=t&&(this.videoHTMLElement.setAttribute("width",t),this._posterElementImage&&this._posterElementImage.setAttribute("width",t),this._previousWidth=t),this.updateAboveMCsPlacement()}}},{key:"playVideo",value:function(){function t(){this.addControlsAndPlay()}this.videoHTMLElement&&(this.stage?t.bind(this)():this.on("added",t,this,!0))}},{key:"addControlsAndPlay",value:function(){this.videoHTMLElement.setAttribute("controls",!0),this._itemListened&&this._itemListened.isPlayPause?this._itemListened.isPlaying?this.videoHTMLElement.play():this.videoHTMLElement.pause():(this.videoHTMLElement.load(),this.videoHTMLElement.play()),this.videoHTMLElement.removeAttribute("controls"),this._addControlsAndPlayTickListener||(this._addControlsAndPlayTickListener=createjs.Ticker.on("tick",function(){this.removePoster(),this._addControlsAndPlayTickListener=null},this,!0))}},{key:"removePoster",value:function(){this._posterElement&&(document.body.removeChild(this._posterElement),this._posterElement=null,this.videoHTMLElement.style.display="block")}},{key:"fadeIn",value:function(t){t.style.opacity=0,function e(){var i=parseFloat(t.style.opacity);(i+=.08)>1||(t.style.opacity=i,requestAnimationFrame(e))}()}},{key:"syncedWith",set:function(t){this._syncedWith=t}},{key:"withBorder",set:function(t){this._withBorder=t}},{key:"withFadeIn",set:function(t){this._withFadeIn=t}},{key:"firstFrame",set:function(t){this._firstFrame=t}},{key:"posterClickHandler",set:function(t){this._posterClickHandler=t}},{key:"withPosterPlayOverlay",set:function(t){return this._withPosterPlayOverlay=t,this},get:function(){return this._withPosterPlayOverlay}},{key:"filePath",get:function(){return this._filePath},set:function(t){""!=t&&(this._filePath=t)}},{key:"itemListened",get:function(){return this._itemListened},set:function(t){t&&(this._listenerClick&&this._itemListened&&this._itemListened.off("click",this._listenerClick),this._itemListened=t,this._listenerClick=this._itemListened.on("click",function(){this.stage&&this.playVideo()},this))}},{key:"posterURL",get:function(){return this._posterURL},set:function(t){this._posterURL=t}},{key:"videoExtensions",set:function(t){t instanceof Array?this._videoExtensions=t:t instanceof String&&this._videoExtensions.indexOf(t)==-1&&this._videoExtensions.push(t)}},{key:"videoHTMLElement",get:function(){return this._videoHTMLElement},set:function(t){this._videoHTMLElement=t}},{key:"loop",set:function(t){return this._videoHTMLElement?void(this._videoHTMLElement.loop=t):void(this._loop=t)}}]),e}(EMOverlay);EMVideo.hasStyle=!1;var EMThree=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){_get(Object.getPrototypeOf(e.prototype),"setup",this).call(this),this.removeAllChildren(),this._scene=new THREE.Scene,this._camera=new THREE.PerspectiveCamera(50,this.width/this.height,.1,1e3),this._renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.domElement.id="EMThree_"+this.getRandomIDString(),document.body.appendChild(this.renderer.domElement),document.body.addEventListener("AfterResize",this.onAfterResize.bind(this)),this.renderer.domElement.addEventListener("mousedown",this.hideHelpOverlay.bind(this)),this.renderer.domElement.addEventListener("touchstart",this.hideHelpOverlay.bind(this)),this.mouseEnabled=this._mouseEnabled||!0,this.on("tick",this.onTick,this)}},{key:"hideHelpOverlay",value:function(){var t=EMOverlay._getHelpOverlay();t&&t.stage&&t.dispatchEvent("click")}},{key:"onTick",value:function(){this.render&&this.render(),this.renderer.render(this.scene,this.camera)}},{key:"onAfterResize",value:function(){this.resizeThreeCanvas(),this.updateAboveMCsPlacement()}},{key:"resizeThreeCanvas",value:function(){var t=this.localToGlobal(0,0),e=canvas.getBoundingClientRect(),i=document.documentElement,n=e.top+window.pageYOffset-i.clientTop+t.y,o=e.left+window.pageXOffset-i.clientLeft+t.x;this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.left=o+"px",this.renderer.domElement.style.top=n+"px",this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width*exportRoot.scaleX,this.height*exportRoot.scaleY)}},{key:"paint",value:function(){_get(Object.getPrototypeOf(e.prototype),"paint",this).call(this),this.resizeThreeCanvas()}},{key:"convertTo2D",value:function(t){var e=new THREE.Vector3,i=.5*this.renderer.context.canvas.width,n=.5*this.renderer.context.canvas.height;return t.updateMatrixWorld(),e.setFromMatrixPosition(t.matrixWorld),e.project(this.camera),e.x=e.x*i+i,e.y=-(e.y*n)+n,{x:e.x/exportRoot.scaleX,y:e.y/exportRoot.scaleY}}},{key:"scene",get:function(){return this._scene},set:function(t){this._scene=t}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera=t}},{key:"renderer",get:function(){return this._renderer}},{key:"mouseEnabled",get:function(){return this._mouseEnabled},set:function(t){_set(Object.getPrototypeOf(e.prototype),"mouseEnabled",t,this),this._mouseEnabled=t,this.renderer&&(this.renderer.domElement.style.pointerEvents=t?"":"none")}}]),e}(EMOverlay),SimulationMetaData=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getRTL",value:function(e){return t.inverseRTL?!e:e}},{key:"needsIERTLFix",value:function(){return(cssua.ua.ie||cssua.ua.edge)&&t.inverseRTL}}]),t}(),Circuit=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];_get(Object.getPrototypeOf(e.prototype),"push",this).apply(i),this._cm=ConnectionManager.getInstance()}return _inherits(e,t),_createClass(e,[{key:"has",value:function(t){return this.indexOf(t)!=-1}},{key:"getComponentPluggedPoles",value:function(t){return this.pluggedPoles.filter(function(e){return e.component==t})}},{key:"getPoleCables",value:function(t){var e=this;return _cm.getPoleCables(t).filter(function(t){return e.cables.indexOf(t)!=-1})}},{key:"release",value:function(){for(var t=0;t<this.cables.length;t++)this.cables[t].destroy()}},{key:"cables",get:function(){return this.filter(function(t){return t instanceof Cable})}},{key:"poles",get:function(){return this.filter(function(t){return t instanceof ComponentPole})}},{key:"components",get:function(){return this.filter(function(t){return t instanceof CircuitComponent})}},{key:"pluggedPoles",get:function(){var t=this;return this.poles.filter(function(e){for(var i=t._cm.getPoleCables(e),n=0;n<i.length;n++)if(t.cables.indexOf(i[n])!=-1)return!0;return!1})}}]),e}(Array),ConnectionEvent=function(t){function e(t){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],s=!(arguments.length<=4||void 0===arguments[4])&&arguments[4];_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,o,s),this._cable=i,this._pole=n}return _inherits(e,t),_createClass(e,[{key:"clone",value:function(){return new e(type,cable,pole,bubbles,cancelable)}},{key:"toString",value:function(){return"ConnectionEvent - type:"+this.type+" / bubbles"+this.bubbles+" / cancelable"+this.cancelable+" / cable"+this._cable+" / pole"+this._pole}},{key:"cable",get:function(){return this._cable}},{key:"pole",get:function(){return this._pole}}]),e}(createjs.Event);ConnectionEvent.CONNECT="fr.edumedia.anim.circuit.events.ConnectionEvent.CONNECT",ConnectionEvent.DISCONNECT="fr.edumedia.anim.circuit.events.ConnectionEvent.DISCONNECT",ConnectionEvent.CONNECT_IN="fr.edumedia.anim.circuit.events.ConnectionEvent.CONNECT_IN",ConnectionEvent.CONNECT_OUT="fr.edumedia.anim.circuit.events.ConnectionEvent.CONNECT_OUT",ConnectionEvent.CABLE_DESTROY="fr.edumedia.anim.circuit.events.ConnectionEvent.CABLE_DESTROY";var ConnectionManager=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._connections=[]}return _inherits(e,t),_createClass(e,[{key:"getConnectionIndex",value:function(t,e){for(var i=0;i<this.connections.length;i++)if(this.connections[i].cable==t&&this.connections[i].pole==e)return i;return-1}},{key:"connect",value:function(t,e){return!(this.getConnectionIndex(t,e)>-1)&&(!!e.canAcceptNewCable&&(this.connections.push(new Connection(t,e)),this.dispatchEvent(new ConnectionEvent(ConnectionEvent.CONNECT,t,e)),this.dispatchEvent(new ConnectionEvent(1==this.getCablePoles(t).length?ConnectionEvent.CONNECT_IN:ConnectionEvent.CONNECT_OUT,t,e)),!0))}},{key:"disconnect",value:function(t,e){var i=this.getConnectionIndex(t,e);i!=-1&&(this.connections.splice(i,1),this.dispatchEvent(new ConnectionEvent(ConnectionEvent.DISCONNECT,t,e)))}},{key:"disconnectCable",value:function(t){for(var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=this.getCablePoles(t),n=0;n<i.length;n++)this.disconnect(t,i[n]);e&&t.destroy()}},{key:"getCablePoles",value:function(t){for(var e=[],i=0;i<this.connections.length;i++)this.connections[i].cable==t&&e.push(this.connections[i].pole);return e}},{key:"getPoleCables",value:function(t){for(var e=[],i=0;i<this.connections.length;i++)this.connections[i].pole==t&&e.push(this.connections[i].cable);return e}},{key:"getCircuit",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return this._circuit=new Circuit(t),this.getCableCircuit(t,e),this._circuit}},{key:"addElementToCircuit",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=this._circuit.indexOf(t)!=-1;return!i&&(this._circuit.push(t),t instanceof ComponentPole?this.getPoleCircuit(t,e):t instanceof Cable&&this.getCableCircuit(t,e),!0)}},{key:"getCableCircuit",value:function(t){for(var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=this.getCablePoles(t),n=0;n<i.length;n++)this.addElementToCircuit(i[n],e)}},{key:"getPoleCircuit",value:function(t){var e,i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(i){var n=t.component.poles;for(e=0;e<n.length;e++)this.addElementToCircuit(n[e])}else this.addElementToCircuit(t.component);this.addElementToCircuit(t);var o=this.getPoleCables(t);for(e=0;e<o.length;e++)this.addElementToCircuit(o[e],i)}},{key:"poleIsConnectedToPole",value:function(t,e){for(var i=this.getPoleCables(t),n=0;n<i.length;n++){var o=this.getCablePoles(i[n]);if(o.indexOf(e)!=-1)return!0}return!1}},{key:"poleIsConnectedToComponent",value:function(t,e){for(var i=this.getPoleCables(t),n=0;n<i.length;n++)for(var o=this.getCablePoles(i[n]),s=0;s<o.length;s++)if(o[s].component==e)return!0;return!1}},{key:"polesBelongToSameCircuit",value:function(t,e){for(var i=this.getPoleCables(t),n=0;n<i.length;n++)if(this.getCircuit(i[n]).has(e))return!0;return!1}},{key:"destroyAllCables",value:function(){for(;this.connections.length>0;)this.disconnectCable(this.connections[0].cable,!0)}},{key:"destroyComponentCables",value:function(t){var e=!0,i=!1,n=void 0;try{for(var o,s=this.components[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var l=o.value;if(t==l){var r=l.cables,a=!0,h=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;this.disconnectCable(f,!0)}}catch(p){h=!0,u=p}finally{try{!a&&d["return"]&&d["return"]()}finally{if(h)throw u}}}}}catch(p){i=!0,n=p}finally{try{!e&&s["return"]&&s["return"]()}finally{if(i)throw n}}}},{key:"connections",get:function(){return this._connections||(this._connections=[]),this._connections}},{key:"components",get:function(){var t=[],e=!0,i=!1,n=void 0;try{for(var o,s=this.connections[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var l=o.value;t.indexOf(l.pole.component)==-1&&t.push(l.pole.component)}}catch(r){i=!0,n=r}finally{try{!e&&s["return"]&&s["return"]()}finally{if(i)throw n}}return t}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(createjs.EventDispatcher),Cable=function(t){function e(t){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._color=e.DEFAULT_COLOR,this._connectionManager=ConnectionManager.getInstance(),this._connectionManager.connect(this,t),t.component.parent.addChild(this),EMMovieClipUtils.createShape(this),this.on("mousedown",this.onMouseDown,this),this.goDrag()}return _inherits(e,t),_createClass(e,[{key:"goDrag",value:function(){this.parent.setChildIndex(this,this.parent.numChildren-1),this._listenerStageMouseUp=stage.on("stagemouseup",this.handleRelease,this),this.dispatchEvent(new CableEvent(CableEvent.DRAG_START,this)),this._listenerTick||(this._listenerTick=createjs.Ticker.on("tick",this.invalidate,this),this.paint())}},{key:"handleRelease",value:function(t){createjs.Ticker.off("tick",this._listenerTick),this._listenerTick=null,stage.off("stagemouseup",this._listenerStageMouseUp);var e=this.parent.globalToLocal(stage.mouseX,stage.mouseY),i=new createjs.Point(e.x,e.y),n=this.parent.getObjectsUnderPoint(i.x,i.y),o=!0,s=!1,l=void 0;try{for(var r,a=n[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var h=r.value;if(h.parent instanceof ComponentPole){var u=h.parent;if(!u.component.acceptsCables)continue;return this._connectionManager.connect(this,u)?(this.invalidate(),void this.dispatchEvent(new CableEvent(CableEvent.DRAG_END,this))):this.destroy()}}}catch(c){s=!0,l=c}finally{try{!o&&a["return"]&&a["return"]()}finally{if(s)throw l}}this.destroy()}},{key:"onMouseDown",value:function(t){this._invalidated=!1,createjs.Ticker.off("tick",this._listenerTick),this._listenerTick=null;var e=this._connectionManager.getCablePoles(this),i=e[0].globalToLocal(stage.mouseX,stage.mouseY),n=e[1].globalToLocal(stage.mouseX,stage.mouseY),o=Math.sqrt(i.x*i.x+i.y*i.y),s=Math.sqrt(n.x*n.x+n.y*n.y),l=e[o<s?0:1],r=e[o<s?1:0];r.component.canCreateNewCable&&(this._connectionManager.disconnect(this,l),this.goDrag())}},{key:"destroy",value:function(){this.off("tick",this._listenerTick),this.shapeGlobal.graphics.clear(),stage&&(stage.off("stagemouseup",this._listenerStageMouseUp),this._connectionManager.disconnectCable(this),this.parent&&this.parent.removeChild(this),this.dispatchEvent(new ConnectionEvent(ConnectionEvent.CABLE_DESTROY,this)),this.dispatchEvent(new CableEvent(CableEvent.DRAG_END,this)))}},{key:"paint",value:function(){this.shapeGlobal.graphics.clear();var t=this._connectionManager.getCablePoles(this);if(0!=t.length){this.visible=!1,this.x=t[0].component.x+t[0].x,this.y=t[0].component.y+t[0].y;var e,i=new createjs.Point;if(2==t.length){var n=t[1].localToGlobal(0,0);e=this.globalToLocal(n.x,n.y),i.x=e.x,i.y=e.y}else e=this.globalToLocal(stage.mouseX,stage.mouseY),i.x=e.x,i.y=e.y;var o=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2));this.shapeGlobal.graphics.setStrokeStyle(5).beginStroke(this._color),this.shapeGlobal.graphics.moveTo(0,0).arcTo(i.x/2,i.y/2+Math.abs(i.x)/5,i.x,i.y,o+o/3.5),this.shapeGlobal.graphics.lineTo(i.x,i.y),this._invalidated=!1,this.visible=!0}}},{key:"invalidate",value:function(){this._invalidated=!0}},{key:"draw",value:function(t){this._invalidated===!0&&this.paint(),_get(Object.getPrototypeOf(e.prototype),"draw",this).call(this,t)}},{key:"getOtherPole",value:function(t){var e=this._connectionManager.getCablePoles(this);return 1==e.length&&e[0]==t?null:e[0]==t?e[1]:e[0]}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.invalidate()}},{key:"pluggedPole",get:function(){return this._connectionManager.getCablePoles(this)[0]}}]),e}(createjs.MovieClip);Cable.DEFAULT_COLOR="#ffffff";var CableEvent=function(t){function e(t){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,o),this._cable=i}return _inherits(e,t),_createClass(e,[{key:"clone",value:function(){return new e(type,cable,bubbles,cancelable)}},{key:"toString",value:function(){return"CableEvent - type:"+this.type+" / bubbles"+this.bubbles+" / cancelable"+this.cancelable+" / cable"+this._cable}},{key:"cable",get:function(){return this._cable}}]),e}(createjs.Event);CableEvent.DRAG_START="fr.edumedia.anim.circuit.events.CableEvent.DRAG_START",CableEvent.DRAG_END="fr.edumedia.anim.circuit.events.CableEvent.DRAG_END";var ComponentPole=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){EMMovieClipUtils.createShape(this),this._maxCables=-1,this._defaultCableColor=Cable.DEFAULT_COLOR,this.addListeners(),this._connectionManager=ConnectionManager.getInstance()}},{key:"addListeners",value:function(){this._listenerMouseDown=this.on("mousedown",this.createCable),this.on("removed",this.onRemoved)}},{key:"removeListeners",value:function(){this.off("mousedown",this._listenerMouseDown),this.off("removed",this._listeneRemoved)}},{key:"onRemoved",value:function(){this.removeListeners();for(var t=this._connectionManager.getPoleCables(this),e=0;e<t.length;e++)t[e].destroy()}},{key:"createCable",value:function(){if(this.canAcceptNewCable&&this.component.canCreateNewCable){var t=new Cable(this);t.color=this.defaultCableColor}}},{key:"toString",value:function(){return"ComponentPole  - component="+component+" / name="+name}},{key:"defaultCableColor",get:function(){return this._defaultCableColor},set:function(t){this._defaultCableColor=t}},{key:"canAcceptNewCable",get:function(){return!!this.component.acceptsCables&&(this.maxCables==-1||this._connectionManager.getPoleCables(this).length<this.maxCables)}},{key:"component",get:function(){return this.parent}},{key:"maxCables",set:function(t){this._maxCables=t},get:function(){return this._maxCables}},{key:"cables",get:function(){return this._connectionManager.getPoleCables(this)}},{key:"numCables",get:function(){return this.cables.length}}]),e}(createjs.MovieClip),CircuitComponent=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){this._cm=ConnectionManager.getInstance(),this._acceptsCables=!0,this._canCreateNewCable=!0,this.stop(),this.addListeners()}},{key:"addListeners",value:function(){this._listenerRotate=this.on(e.EVENT_ROTATE,this.onRotate),this._listenerRemoved=this.on("removed",this.removeListeners);
}},{key:"onRotate",value:function(t){this.updateUI()}},{key:"removeListeners",value:function(){arguments.length<=0||void 0===arguments[0]?null:arguments[0];this.off(e.EVENT_ROTATE,this._listenerRotate),this.off("removed",this._listenerRemoved)}},{key:"updateUI",value:function(){}},{key:"storePosition",value:function(){this.previousPosition=new Point(x,y)}},{key:"getOtherPole",value:function(t){return 2!=this.poles.length?null:t==this.firstPole?this.secondPole:this.firstPole}},{key:"hasCableTo",value:function(t){return this.cablesToComponentCount(t)>0}},{key:"cablesToComponentCount",value:function(t){for(var e=0,i=this.pluggedPoles,n=0;n<i.length;n++)for(var o=this._cm.getPoleCables(i[n]),s=0;s<o.length;s++)for(var l=this._cm.getCablePoles(o[s]),r=0;r<l.length;r++)l[r].component==t&&e++;return e}},{key:"selected",get:function(){return ComponentStage.instance.selectedComponent==this}},{key:"poles",get:function(){for(var t=[],e=0;e<this.numChildren;e++)this.getChildAt(e)instanceof ComponentPole&&t.push(this.getChildAt(e));return t}},{key:"pluggedPoles",get:function(){var t=this;return t.poles.filter(function(e){return t._cm.getPoleCables(e).length>0})}},{key:"firstPole",get:function(){return this.poles[0]}},{key:"secondPole",get:function(){return this.poles[1]}},{key:"cables",get:function(){for(var t=[],e=this.pluggedPoles,i=0;i<e.length;i++)for(var n=this._cm.getPoleCables(e[i]),o=0;o<n.length;o++)t.indexOf(n[o])==-1&&t.push(n[o]);return t}},{key:"pluggedComponents",get:function(){for(var t=[],e=this.pluggedPoles,i=0;i<e.length;i++)for(var n=this._cm.getPoleCables(e[i]),o=0;o<n.length;o++)for(var s=this._cm.getCablePoles(n[o]),l=0;l<s.length;l++)s[l].component!=this&&t.push(s[l].component);return t}},{key:"acceptsCables",get:function(){return this._acceptsCables},set:function(t){t!=this.acceptsCables&&(this._acceptsCables=t,this.alpha=t?1:.2)}},{key:"canCreateNewCable",get:function(){return this._canCreateNewCable},set:function(t){this._canCreateNewCable=t}},{key:"previousPosition",get:function(){return this._previousPosition},set:function(t){this._previousPosition=t}}]),e}(createjs.MovieClip);CircuitComponent.EVENT_ROTATE="EVENT_ROTATE";var ComponentStage=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){e.instance=this,this._components=[],this._rotator=new ComponentRotator,this.on(e.EVENT_SELECT_COMPONENT,this.onCompoSelect)}},{key:"registerComponent",value:function(t){t.y=stage.mouseY-t.height/2,this.parent.addChild(t),this.addCompoEvents(t),this.startCompoDrag(t)}},{key:"startCompoDrag",value:function(t){this.hideRotator(),this._listenerMouseDown=t.on("mousedown",function(t){EMDragManager.startDrag(t)});for(var e=0;e<t.parent.numChildren;e++)if(this.parent.getChildAt(e)instanceof Cable)return t.parent.setChildIndex(t,e-1);t.parent.setChildIndex(t,t.parent.numChildren-1)}},{key:"stopCompoDrag",value:function(t){t.off("mousedown",this._listenerMouseDown)}},{key:"addCompoEvents",value:function(t){t.contact.on("mousedown",this.onCompoPress),this._listenerMouseUp=t.contact.on("mouseup",this.onCompoRelease)}},{key:"removeCompoEvents",value:function(t){t.off("mouseup",this._listenerMouseUp)}},{key:"onCompoPress",value:function(t){this.startCompoDrag(t.target.parent)}},{key:"onCompoRelease",value:function(t){this.handleCompoDrop(t.target.parent)}},{key:"handleCompoDrop",value:function(t){this.stopCompoDrag(t);var e=t.dropTarget;if(e)for(;e instanceof Shape;)e=e.parent;e?this.addComponent(t):this.removeComponent(t)}},{key:"componentPositionConflicts",value:function(t){for(var e=0;e<this._components.length;e++)if(this._components[e]!=t&&this._components[e].hitTestObject(t))return!0;return t.y<y||(t.x<x||(t.x+EMMovieClipUtils.getWidth(t)>x+EMMovieClipUtils.getWidth(this)||t.y+EMMovieClipUtils.getHeight(t)>y+EMMovieClipUtils.getHeight(this)))}},{key:"addComponent",value:function(t){if(this.placeCompoOnGrid(t),this.componentPositionConflicts(t)){if(!t.previousPosition)return this.removeComponent(t);t.x=t.previousPosition.x,t.y=t.previousPosition.y}t.storePosition(),this.selectedComponent=c,this.showRotator(t),this._components.indexOf(t)>-1||this._components.push(t)}},{key:"placeCompoOnGrid",value:function(t){t.x=e.GRID_SIZE*Math.round((t.x-x)/e.GRID_SIZE)+x,t.y=e.GRID_SIZE*Math.round((t.y-y)/e.GRID_SIZE)+y}},{key:"removeComponent",value:function(t){this.removeCompoEvents(t),t.parent.removeChild(t),this._components.splice(this._components.indexOf(t),1),t==this.selectedComponent&&(e._selected=null,this.dispatchEvent(new Event(e.EVENT_SELECT_COMPONENT)),this.hideRotator())}},{key:"onCompoSelect",value:function(){this.showRotator(this.selectedComponent)}},{key:"showRotator",value:function(t){this._rotator.x=t.x+EMMovieClipUtils.getWidth(t)-EMMovieClipUtils.getWidth(this._rotator),this._rotator.y=t.y+EMMovieClipUtils.getHeight(t),this._rotator.target=t,t.parent.addChild(this._rotator)}},{key:"hideRotator",value:function(){this._rotator.stage&&this.parent.removeChild(this._rotator)}},{key:"canRotateLeft",value:function(t){this.rotateLeft(t,!0);var e=!this.componentPositionConflicts(t);return this.rotateRight(t,!0),e}},{key:"rotateLeft",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];1==t.currentFrame?t.gotoAndStop(t.totalFrames):t.prevFrame(),e||(this.showRotator(t),t.dispatchEvent(new Event(CircuitComponent.EVENT_ROTATE)))}},{key:"canRotateRight",value:function(t){this.rotateRight(t,!0);var e=!this.componentPositionConflicts(t);return this.rotateLeft(t,!0),e}},{key:"rotateRight",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];t.currentFrame==t.totalFrames?t.gotoAndStop(1):t.nextFrame(),e||(this.showRotator(t),t.dispatchEvent(new Event(CircuitComponent.EVENT_ROTATE)))}},{key:"selectedComponent",set:function(t){t!=this.selectedComponent&&(this.selectedComponent&&this.selectedComponent.unselect(),t.select(),e._selected=t,this.dispatchEvent(new Event(e.EVENT_SELECT_COMPONENT)))},get:function(){return e._selected}}]),e}(createjs.MovieClip);ComponentStage.instance,ComponentStage.GRID_SIZE=50,ComponentStage._selected,ComponentStage.EVENT_SELECT_COMPONENT="EVENT_SELECT_COMPONENT";var ComponentRotator=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"setup",value:function(){this._rLeft.cursor=this._rRight.cursor="pointer",this._rLeft.name="rButtons",this._rRight.name="rButtons",this.on("click",this.onClick)}},{key:"onClick",value:function(t){if("rButtons"==t.target.name){var e=t.target;e.enabled&&(e==this.rLeft?ComponentStage.instance.rotateLeft(target):ComponentStage.instance.rotateRight(target))}}},{key:"updateEnabledState",value:function(){this.rLeft.enabled=ComponentStage.instance.canRotateLeft(target),this.rRight.enabled=ComponentStage.instance.canRotateRight(target),this.target.updateUI()}},{key:"target",set:function(t){this._target=t,this.updateEnabledState()},get:function(){return this._target}},{key:"rLeft",get:function(){return this._rLeft},set:function(t){this._rLeft=t}},{key:"rRight",get:function(){return this._rRight},set:function(t){this._rRight=t}}]),e}(createjs.MovieClip),Connection=function e(t,i){_classCallCheck(this,e),this.cable=t,this.pole=i};(function(){function t(t){this._value=t}function e(t){var e,i="";for(e=0;e<t;e++)i+="0";return i}function i(t,i){var n,o,s,l,r,a,h,u;return u=t.toString(),n=u.split("e")[0],l=u.split("e")[1],o=n.split(".")[0],s=n.split(".")[1]||"",+l>0?u=o+s+e(l-s.length):(r=+o<0?"-0":"0",i>0&&(r+="."),h=e(-1*l-1),a=(h+Math.abs(o)+s).substr(0,i),u=r+a),+l>0&&i>0&&(u+="."+e(i)),u}function n(t,e,n,o){var s,l,r=Math.pow(10,e);return t.toString().indexOf("e")>-1?(l=i(t,e),"-"===l.charAt(0)&&+l>=0&&(l=l.substr(1))):l=(n(t+"e+"+e)/r).toFixed(e),o&&(s=new RegExp("0{1,"+o+"}$"),l=l.replace(s,"")),l}function o(t,e,i){var n,o=e.replace(/\{[^\{\}]*\}/g,"");return n=o.indexOf("$")>-1?l(t,x[M].currency.symbol,e,i):o.indexOf("%")>-1?a(t,e,i):o.indexOf(":")>-1?h(t,e):d(t._value,e,i)}function s(t,e){var i,n,o,s,l,r=e,a=!1;if(e.indexOf(":")>-1)t._value=u(e);else if(e===T)t._value=0;else{for("."!==x[M].delimiters.decimal&&(e=e.replace(/\./g,"").replace(x[M].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+x[M].abbreviations.thousand+"(?:\\)|(\\"+x[M].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+x[M].abbreviations.million+"(?:\\)|(\\"+x[M].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+x[M].abbreviations.billion+"(?:\\)|(\\"+x[M].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+x[M].abbreviations.trillion+"(?:\\)|(\\"+x[M].currency.symbol+")?(?:\\))?)?$"),l=1;l<b.length&&!a;++l)e.indexOf(b[l])>-1?a=Math.pow(1024,l):e.indexOf(w[l])>-1&&(a=Math.pow(1e3,l));var h=e.replace(/[^0-9\.]+/g,"");""===h?t._value=NaN:(t._value=(a?a:1)*(r.match(i)?Math.pow(10,3):1)*(r.match(n)?Math.pow(10,6):1)*(r.match(o)?Math.pow(10,9):1)*(r.match(s)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(h),t._value=a?Math.ceil(t._value):t._value)}return t._value}function l(t,e,i,n){var o,s,l=i,r=l.indexOf("$"),a=l.indexOf("("),h=l.indexOf("+"),u=l.indexOf("-"),c="",f="";if(l.indexOf("$")===-1?"infix"===x[M].currency.position?(f=e,x[M].currency.spaceSeparated&&(f=" "+f+" ")):x[M].currency.spaceSeparated&&(c=" "):l.indexOf(" $")>-1?(c=" ",l=l.replace(" $","")):l.indexOf("$ ")>-1?(c=" ",l=l.replace("$ ","")):l=l.replace("$",""),s=d(t._value,l,n,f),i.indexOf("$")===-1)switch(x[M].currency.position){case"postfix":s.indexOf(")")>-1?(s=s.split(""),s.splice(-1,0,c+e),s=s.join("")):s=s+c+e;break;case"infix":break;case"prefix":s.indexOf("(")>-1||s.indexOf("-")>-1?(s=s.split(""),o=Math.max(a,u)+1,s.splice(o,0,e+c),s=s.join("")):s=e+c+s;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else r<=1?s.indexOf("(")>-1||s.indexOf("+")>-1||s.indexOf("-")>-1?(s=s.split(""),o=1,(r<a||r<h||r<u)&&(o=0),s.splice(o,0,e+c),s=s.join("")):s=e+c+s:s.indexOf(")")>-1?(s=s.split(""),s.splice(-1,0,c+e),s=s.join("")):s=s+c+e;return s}function r(t,e,i,n){return l(t,e,i,n)}function a(t,e,i){var n,o="",s=100*t._value;return e.indexOf(" %")>-1?(o=" ",e=e.replace(" %","")):e=e.replace("%",""),n=d(s,e,i),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,o+"%"),n=n.join("")):n=n+o+"%",n}function h(t){var e=Math.floor(t._value/60/60),i=Math.floor((t._value-60*e*60)/60),n=Math.round(t._value-60*e*60-60*i);return e+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}function u(t){var e=t.split(":"),i=0;return 3===e.length?(i+=60*Number(e[0])*60,i+=60*Number(e[1]),i+=Number(e[2])):2===e.length&&(i+=60*Number(e[0]),i+=Number(e[1])),Number(i)}function c(t,e,i){var n,o,s,l=e[0],r=Math.abs(t);if(r>=i){for(n=1;n<e.length;++n)if(o=Math.pow(i,n),s=Math.pow(i,n+1),r>=o&&r<s){l=e[n],t/=o;break}l===e[0]&&(t/=Math.pow(i,e.length-1),l=e[e.length-1])}return{value:t,suffix:l}}function d(t,i,o,s){var l,r,a,h,u,d,f,p,m,g,v,_,y,b,w,C,E,O=!1,L=!1,P=!1,D="",S=!1,A=!1,j=!1,R=!1,N=!1,W="",F="",I=Math.abs(t),H="",B=!1,z=!1,$="";if(0===t&&null!==T)return T;if(!isFinite(t))return""+t;if(0===i.indexOf("{")){var U=i.indexOf("}");if(U===-1)throw Error('Format should also contain a "}"');g=i.slice(1,U),i=i.slice(U+1)}else g="";if(i.indexOf("}")===i.length-1){var G=i.indexOf("{");if(G===-1)throw Error('Format should also contain a "{"');v=i.slice(G+1,-1),i=i.slice(0,G+1)}else v="";var V;for(V=i.indexOf(".")===-1?i.match(/([0-9]+).*/):i.match(/([0-9]+)\..*/),C=null===V?-1:V[1].length,i.indexOf("-")!==-1&&(B=!0),i.indexOf("(")>-1?(O=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(L=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(p=i.split(".")[0].match(/[0-9]+/g)||["0"],p=parseInt(p[0],10),S=i.indexOf("aK")>=0,A=i.indexOf("aM")>=0,j=i.indexOf("aB")>=0,R=i.indexOf("aT")>=0,N=S||A||j||R,i.indexOf(" a")>-1?(D=" ",i=i.replace(" a","")):i=i.replace("a",""),a=Math.floor(Math.log(I)/Math.LN10)+1,u=a%3,u=0===u?3:u,p&&0!==I&&(h=Math.floor(Math.log(I)/Math.LN10)+1-p,d=3*~~((Math.min(p,a)-u)/3),I/=Math.pow(10,d),i.indexOf(".")===-1&&p>3&&(i+="[.]",b=0===h?0:3*~~(h/3)-h,b=b<0?b+3:b,i+=e(b))),Math.floor(Math.log(Math.abs(t))/Math.LN10)+1!==p&&(I>=Math.pow(10,12)&&!N||R?(D+=x[M].abbreviations.trillion,t/=Math.pow(10,12)):I<Math.pow(10,12)&&I>=Math.pow(10,9)&&!N||j?(D+=x[M].abbreviations.billion,t/=Math.pow(10,9)):I<Math.pow(10,9)&&I>=Math.pow(10,6)&&!N||A?(D+=x[M].abbreviations.million,t/=Math.pow(10,6)):(I<Math.pow(10,6)&&I>=Math.pow(10,3)&&!N||S)&&(D+=x[M].abbreviations.thousand,t/=Math.pow(10,3)))),E=0;E<k.length;++E)if(l=k[E],i.indexOf(l.marker)>-1){i.indexOf(" "+l.marker)>-1&&(W=" "),i=i.replace(W+l.marker,""),r=c(t,l.suffixes,l.scale),t=r.value,W+=r.suffix;break}if(i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(F=" ",i=i.replace(" o","")):i=i.replace("o",""),x[M].ordinal&&(F+=x[M].ordinal(t))),i.indexOf("[.]")>-1&&(P=!0,i=i.replace("[.]",".")),f=t.toString().split(".")[0],m=i.split(".")[1],_=i.indexOf(","),m){if(m.indexOf("*")!==-1?H=n(t,t.toString().split(".")[1].length,o):m.indexOf("[")>-1?(m=m.replace("]",""),m=m.split("["),H=n(t,m[0].length+m[1].length,o,m[1].length)):H=n(t,m.length,o),f=H.split(".")[0],H.split(".")[1].length){var Y=s?D+s:x[M].delimiters.decimal;H=Y+H.split(".")[1]}else H="";P&&0===Number(H.slice(1))&&(H="")}else f=n(t,0,o);return f.indexOf("-")>-1&&(f=f.slice(1),z=!0),f.length<C&&(f=e(C-f.length)+f),_>-1&&(f=f.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+x[M].delimiters.thousands)),0===i.indexOf(".")&&(f=""),y=i.indexOf("("),w=i.indexOf("-"),$=y<w?(O&&z?"(":"")+(B&&z||!O&&z?"-":""):(B&&z||!O&&z?"-":"")+(O&&z?"(":""),g+$+(!z&&L&&0!==t?"+":"")+f+H+(F?F:"")+(D&&!s?D:"")+(W?W:"")+(O&&z?")":"")+v}function f(t,e){x[t]=e}function p(t){M=t;var e=x[t].defaults;e&&e.format&&_.defaultFormat(e.format),e&&e.currencyFormat&&_.defaultCurrencyFormat(e.currencyFormat)}function m(){return"undefined"!=typeof process&&void 0===process.browser&&process.title&&(0===process.title.indexOf("node")||process.title.indexOf("meteor-tool")>0||"grunt"===process.title||"gulp"===process.title)&&"undefined"!=typeof require}function g(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function v(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var i=g(t),n=g(e);return i>n?i:n},-(1/0))}var _,y="1.9.3",b=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],w=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],C={general:{scale:1024,suffixes:w,marker:"bd"},binary:{scale:1024,suffixes:b,marker:"b"},decimal:{scale:1e3,suffixes:w,marker:"d"}},k=[C.general,C.binary,C.decimal],x={},E=x,M="en-US",T=null,O="0,0",L="0$",P="undefined"!=typeof module&&module.exports,D={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}};_=function(e){return _.isNumbro(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=_.fn.unformat(e)),new t(Number(e))},_.version=y,_.isNumbro=function(e){return e instanceof t},_.setLanguage=function(t,e){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var i=t,n=t.split("-")[0],o=null;E[i]||(Object.keys(E).forEach(function(t){o||t.split("-")[0]!==n||(o=t)}),i=o||e||"en-US"),p(i)},_.setCulture=function(t,e){var i=t,n=t.split("-")[1],o=null;x[i]||(n&&Object.keys(x).forEach(function(t){o||t.split("-")[1]!==n||(o=t)}),i=o||e||"en-US"),p(i)},_.language=function(t,e){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!t)return M;if(t&&!e){if(!E[t])throw new Error("Unknown language : "+t);p(t)}return!e&&E[t]||f(t,e),_},_.culture=function(t,e){if(!t)return M;if(t&&!e){if(!x[t])throw new Error("Unknown culture : "+t);p(t)}return!e&&x[t]||f(t,e),_},_.languageData=function(t){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!t)return E[M];if(!E[t])throw new Error("Unknown language : "+t);return E[t]},_.cultureData=function(t){if(!t)return x[M];if(!x[t])throw new Error("Unknown culture : "+t);return x[t]},_.culture("en-US",D),_.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),E},_.cultures=function(){return x},_.zeroFormat=function(t){T="string"==typeof t?t:null},_.defaultFormat=function(t){O="string"==typeof t?t:"0.0"},_.defaultCurrencyFormat=function(t){L="string"==typeof t?t:"0$"},_.validate=function(t,e){var i,n,o,s,l,r,a,h;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",t)),t=t.trim(),t=t.replace(/^[+-]?/,""),t.match(/^\d+$/))return!0;if(""===t)return!1;try{a=_.cultureData(e)}catch(u){a=_.cultureData(_.culture())}return o=a.currency.symbol,l=a.abbreviations,i=a.delimiters.decimal,n="."===a.delimiters.thousands?"\\.":a.delimiters.thousands,h=t.match(/^[^\d\.\,]+/),(null===h||(t=t.substr(1),h[0]===o))&&(h=t.match(/[^\d]+$/),(null===h||(t=t.slice(0,-1),h[0]===l.thousand||h[0]===l.million||h[0]===l.billion||h[0]===l.trillion))&&(r=new RegExp(n+"{2}"),!t.match(/[^\d.,]/g)&&(s=t.split(i),!(s.length>2)&&(s.length<2?!!s[0].match(/^\d+.*\d$/)&&!s[0].match(r):""===s[0]?!s[0].match(r)&&!!s[1].match(/^\d+$/):1===s[0].length?!!s[0].match(/^\d+$/)&&!s[0].match(r)&&!!s[1].match(/^\d+$/):!!s[0].match(/^\d+.*\d$/)&&!s[0].match(r)&&!!s[1].match(/^\d+$/)))))},_.loadLanguagesInNode=function(){console.warn("`loadLanguagesInNode` is deprecated since version 1.6.0. Use `loadCulturesInNode` instead"),_.loadCulturesInNode()},_.loadCulturesInNode=function(){var t=require("./languages");for(var e in t)e&&_.culture(e,t[e])},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var i,n,o=this.length>>>0,s=!1;for(1<arguments.length&&(n=e,s=!0),i=0;o>i;++i)this.hasOwnProperty(i)&&(s?n=t(n,this[i],i,this):(n=this[i],s=!0));if(!s)throw new TypeError("Reduce of empty array with no initial value");return n}),_.fn=t.prototype={clone:function(){return _(this)},format:function(t,e){return o(this,t?t:O,void 0!==e?e:Math.round)},formatCurrency:function(t,e){return l(this,x[M].currency.symbol,t?t:L,void 0!==e?e:Math.round)},formatForeignCurrency:function(t,e,i){return r(this,t,e?e:L,void 0!==i?i:Math.round)},unformat:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=s(this,t);return isNaN(e)?void 0:e}},binaryByteUnits:function(){return c(this._value,C.binary.suffixes,C.binary.scale).suffix},byteUnits:function(){return c(this._value,C.general.suffixes,C.general.scale).suffix},decimalByteUnits:function(){return c(this._value,C.decimal.suffixes,C.decimal.scale).suffix},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e){return t+i*e}var i=v.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/i,this},subtract:function(t){function e(t,e){return t-i*e}var i=v.call(null,this._value,t);return this._value=[t].reduce(e,this._value*i)/i,this},multiply:function(t){function e(t,e){var i=v(t,e),n=t*i;return n*=e*i,n/=i*i}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e){var i=v(t,e);return t*i/(e*i)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(_(this._value).subtract(t).value())}},m()&&_.loadCulturesInNode(),P?module.exports=_:("undefined"==typeof ender&&(this.numbro=_),"function"==typeof define&&define.amd&&define([],function(){return _}))}).call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"cs-CZ",cultureCode:"cs-CZ",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"Kč",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"da-DK",cultureCode:"da-DK",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mio",billion:"mia",trillion:"b"},ordinal:function(){return"."},currency:{symbol:"kr",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"de-CH",cultureCode:"de-CH",delimiters:{thousands:"'",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"CHF",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"de-DE",cultureCode:"de-DE",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"€",position:"postfix",spaceSeparated:!0},defaults:{currencyFormat:",4"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"en-AU",cultureCode:"en-AU",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"$ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"en-GB",cultureCode:"en-GB",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"£",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"$ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"en-NZ",cultureCode:"en-NZ",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"$ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"en-ZA",cultureCode:"en-ZA",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"R",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"$ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"es-AR",cultureCode:"es-AR",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===e||3===e?"er":2===e?"do":7===e||0===e?"mo":8===e?"vo":9===e?"no":"to"},currency:{symbol:"$",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"es-ES",cultureCode:"es-ES",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===e||3===e?"er":2===e?"do":7===e||0===e?"mo":8===e?"vo":9===e?"no":"to"},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"et-EE",cultureCode:"et-EE",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:" tuh",million:" mln",billion:" mld",trillion:" trl"},ordinal:function(){return"."},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"fa-IR",cultureCode:"fa-IR",delimiters:{thousands:"،",decimal:"."},abbreviations:{thousand:"هزار",million:"میلیون",billion:"میلیارد",trillion:"تریلیون"},ordinal:function(){return"ام"},currency:{symbol:"﷼"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"fi-FI",cultureCode:"fi-FI",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(){return"."},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"fil-PH",cultureCode:"fil-PH",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"₱"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"fr-CA",cultureCode:"fr-CA",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(t){return 1===t?"er":"ème"},currency:{symbol:"$",position:"postfix",spaceSeparated:!0},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"$ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"fr-CH",cultureCode:"fr-CH",delimiters:{thousands:"'",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){return 1===t?"er":"ème"},currency:{symbol:"CHF",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"fr-FR",cultureCode:"fr-FR",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){return 1===t?"er":"ème"},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"he-IL",cultureCode:"he-IL",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"אלף",million:"מליון",billion:"בליון",trillion:"טריליון"},currency:{symbol:"₪",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"₪ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"₪ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"hu-HU",cultureCode:"hu-HU",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"E",million:"M",billion:"Mrd",trillion:"T"},ordinal:function(){return"."},currency:{symbol:" Ft",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"it-IT",
cultureCode:"it-IT",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mila",million:"mil",billion:"b",trillion:"t"},ordinal:function(){return"º"},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"ja-JP",cultureCode:"ja-JP",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十億",trillion:"兆"},ordinal:function(){return"."},currency:{symbol:"¥",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"$ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"ko-KR",cultureCode:"ko-KR",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"천",million:"백만",billion:"십억",trillion:"일조"},ordinal:function(){return"."},currency:{symbol:"₩"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"lv-LV",cultureCode:"lv-LV",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:" tūkst.",million:" milj.",billion:" mljrd.",trillion:" trilj."},ordinal:function(){return"."},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"nb-NO",cultureCode:"nb-NO",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"t",million:"M",billion:"md",trillion:"t"},currency:{symbol:"kr",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"nl-BE",cultureCode:"nl-BE",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"mln",billion:"mld",trillion:"bln"},ordinal:function(t){var e=t%100;return 0!==t&&e<=1||8===e||e>=20?"ste":"de"},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"nl-NL",cultureCode:"nl-NL",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mln",billion:"mrd",trillion:"bln"},ordinal:function(t){var e=t%100;return 0!==t&&e<=1||8===e||e>=20?"ste":"de"},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"pl-PL",cultureCode:"pl-PL",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tys.",million:"mln",billion:"mld",trillion:"bln"},ordinal:function(){return"."},currency:{symbol:" zł",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"pt-BR",cultureCode:"pt-BR",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mil",million:"milhões",billion:"b",trillion:"t"},ordinal:function(){return"º"},currency:{symbol:"R$",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"pt-PT",cultureCode:"pt-PT",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(){return"º"},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"ru-RU",cultureCode:"ru-RU",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тыс.",million:"млн",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"руб.",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"ru-UA",cultureCode:"ru-UA",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тыс.",million:"млн",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"₴",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"sk-SK",cultureCode:"sk-SK",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"€",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"sv-SE",cultureCode:"sv-SE",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"t",million:"M",billion:"md",trillion:"tmd"},currency:{symbol:"kr",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"th-TH",cultureCode:"th-TH",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"พัน",million:"ล้าน",billion:"พันล้าน",trillion:"ล้านล้าน"},ordinal:function(){return"."},currency:{symbol:"฿",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"},e={langLocaleCode:"tr-TR",cultureCode:"tr-TR",delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"bin",million:"milyon",billion:"milyar",trillion:"trilyon"},ordinal:function(e){if(0===e)return"'ıncı";var i=e%10,n=e%100-i,o=e>=100?100:null;return t[i]||t[n]||t[o]},currency:{symbol:"₺",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=e),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(e.cultureCode,e)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"uk-UA",cultureCode:"uk-UA",delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тис.",million:"млн",billion:"млрд",trillion:"блн"},ordinal:function(){return""},currency:{symbol:"₴",position:"postfix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:",0.00 $",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:",0 $"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"zh-CN",cultureCode:"zh-CN",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十亿",trillion:"兆"},ordinal:function(){return"."},currency:{symbol:"¥",position:"prefix"},defaults:{currencyFormat:",4 a"},formats:{fourDigits:"4 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00",fullWithNoDecimals:"$ ,0"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window),function(){var t={langLocaleCode:"zh-TW",cultureCode:"zh-TW",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百萬",billion:"十億",trillion:"兆"},ordinal:function(){return"第"},currency:{symbol:"NT$"}};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&window.numbro&&window.numbro.culture&&window.numbro.culture(t.cultureCode,t)}.call("undefined"==typeof window?void 0:window);var numbroCultures=numbro.cultures();numbro.culture("en",numbroCultures["en-GB"]),numbro.culture("es",numbroCultures["es-ES"]),numbro.culture("fr",numbroCultures["fr-FR"]),numbro.culture("de",numbroCultures["de-DE"]),numbro.culture("nl",numbroCultures["nl-NL"]),numbro.culture("ar",numbroCultures["en-US"]),numbro.culture("ru",numbroCultures["ru-RU"]),numbro.culture("tr",numbroCultures["tr-TR"]);var Appareil=function(){function t(e,i,n,o,s,l){_classCallCheck(this,t),t.instances.push(this),this._nom=e,this._cible=i,this._puissance=n,this._consommation=o,this._etat=s,this._alimente=!0,this._cablage=l,this._self=this;var r=this;this._cablage.visible=!1,this.light.bind(this)(this._etat),this._cible.on("click",function(t){r.showCable(r._cablage),r.showInfo.bind(this)(t,!0),r.etat=!r.etat},this)}return _createClass(t,[{key:"light",value:function(e){var i=e?1:0,n=this._cible.parent.currentFrame;i!=n&&(this._cible.parent.gotoAndStop(i),e?t.racine.currentCpt+=this._puissance:t.racine.currentCpt-=this._puissance,t.racine.currentCpt<0&&(t.racine.currentCpt=0),t.racine.consoTf.text=t.racine.currentCpt,t.racine.checkForfait())}},{key:"showCable",value:function(e){t.racine.oldCable&&e&&e.name!=t.racine.oldCable.name?(e.visible=!0,t.racine.oldCable.visible=!1):e.visible=!0,t.racine.oldCable=e}},{key:"showInfo",value:function(e,i){this.infAtt=t.racine.infAtt,i?(this.infAtt.currentAppareil=this,this.infAtt.interrupteur.visible=!0,this.infAtt.x=330,this.infAtt.y=0,this.infAtt.visible=!0,this.infAtt.chpInfNom.text=this._nom,this.infAtt.chpDesc.text=t.power,this.infAtt.chpDesc.y=56.5,this.infAtt.chpInfPuiss.text=this._puissance.toString()+t.watt,this.infAtt.interrupteur.gotoAndStop(this._etat?1:0)):this.infAtt.visible=!1}},{key:"nom",get:function(){return this._nom}},{key:"cible",get:function(){return this._cible}},{key:"puissance",get:function(){return this._puissance}},{key:"consommation",get:function(){return this._consommation}},{key:"etat",get:function(){return this._etat},set:function(t){this._etat=t,this.infAtt&&this.infAtt.interrupteur.gotoAndStop(t?1:0),this.light.bind(this)(t&&this.alimente)}},{key:"cablage",get:function(){return this._cablage}},{key:"alimente",get:function(){return this._alimente},set:function(t){this._alimente=t,this.light.bind(this)(t&&this.etat)}}]),t}();Appareil.switchAllOff=function(){for(var t=0;t<Appareil.instances.length;t++)Appareil.instances[t].etat=!1},Appareil.instances=[];var Famille2=function(){function t(e,i,n){_classCallCheck(this,t),this._nom=e,this._tablo=i,this._group=n,this._alimente=!0,this._etat=!0;for(var o=0;o<this._tablo.length;o++){var s=this._tablo[o];this._group&&(s.cible.on("mouseover",function(){for(o=0;o<i.length;o++)i[o].showCable(!0,i[o].cablage)},this),s.cible.on("mouseout",function(){for(o=0;o<i.length;o++)i[o].showCable(!1,i[o].cablage)},this),s.cible.on("click",function(){for(o=0;o<i.length;o++)i[o].light(!i[o].etat)},this))}}return _createClass(t,[{key:"alimente",get:function(){return this._alimente},set:function(t){var e=t&&this.etat;this._alimente=t;for(var i=0;i<this._tablo.length;i++){var n=this._tablo[i];n.alimente=e}}},{key:"etat",get:function(){return this._etat},set:function(t){var e=t&&this.alimente;this._etat=t;for(var i=0;i<this._tablo.length;i++){var n=this._tablo[i];n.alimente=e}}}]),t}();